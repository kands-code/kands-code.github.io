<!DOCTYPE HTML>
<html
    lang="zh-Hans" 
    class="rust" 
    dir="ltr"> 
    <head>
        <title>PostgreSQL å­¦ä¹  01 - Kevin Stephen&#x27;s Blogs</title> 
        <meta charset="UTF-8">
        <meta name="description" content="æ‰¾åˆ°å±äºè‡ªå·±çš„å…‰">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">
        
         
        <link rel="icon" href="../../favicon.svg">
         
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">

        <link rel="stylesheet"
            href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <link rel="stylesheet" href="../../theme/utils.css">

    </head>
    <body class="sidebar-visible no-js">
        <div id="body-container">
            <script>
                // è·å– root è·¯å¾„
                var path_to_root = "../../";
                // è·å–é»˜è®¤ä¸»é¢˜
                var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches
                    ? "ayu"
                    : "rust";
            </script>
            <script>
                try {
                    var theme = localStorage.getItem("mdbook-theme");
                    var sidebar = localStorage.getItem("mdbook-sidebar");

                    if (theme.startsWith('"') && theme.endsWith('"')) {
                        localStorage.setItem(
                            "mdbook-theme",
                            theme.slice(1, theme.length - 1).trim()
                        );
                    }

                    if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                        localStorage.setItem(
                            "mdbook-sidebar",
                            sidebar.slice(1, sidebar.length - 1).trim()
                        );
                    }
                } catch (e) {}
            </script>
            <script>
                var theme;
                try {
                    theme = localStorage.getItem("mdbook-theme");
                } catch (e) {}
                if (theme === null || theme === undefined) {
                    theme = default_theme;
                }
                var html = document.querySelector("html");
                html.classList.remove("rust");
                html.classList.add(theme);
                var body = document.querySelector("body");
                body.classList.remove("no-js");
                body.classList.add("js");
            </script>

            <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">
            <script>
                var body = document.querySelector("body");
                var sidebar = null;
                var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
                if (document.body.clientWidth >= 1080) {
                try {
                    sidebar = localStorage.getItem("mdbook-sidebar");
                } catch (e) {}
                    sidebar = sidebar || "visible";
                } else {
                    sidebar = "hidden";
                }
                sidebar_toggle.checked = sidebar === "visible";
                body.classList.remove("sidebar-visible");
                body.classList.add("sidebar-" + sidebar);
            </script>

            <nav id="sidebar" class="sidebar" aria-label="Table of contents">
                <div class="sidebar-scrollbox">
                    <ol class="chapter"><li class="chapter-item "><a href="../../init.html">Init</a></li><li class="chapter-item "><a href="../../about.html">About</a></li><li class="chapter-item affix "><li class="part-title">Notes</li><li class="chapter-item "><a href="../../notes/rust/index.html">Rust</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../notes/rust/20210605-rust-learn-01.html">Rust å­¦ä¹  01</a></li><li class="chapter-item "><a href="../../notes/rust/20210610-rust-learn-02.html">Rust å­¦ä¹  02</a></li><li class="chapter-item "><a href="../../notes/rust/20210824-rust-learn-03.html">Rust å­¦ä¹  03</a></li><li class="chapter-item "><a href="../../notes/rust/20211216-rust-learn-04.html">Rust å­¦ä¹  04</a></li><li class="chapter-item "><a href="../../notes/rust/20220512-rust-learn-05.html">Rust å­¦ä¹  05</a></li><li class="chapter-item "><a href="../../notes/rust/20220514-rust-learn-06.html">Rust å­¦ä¹  06</a></li><li class="chapter-item "><a href="../../notes/rust/20220520-rust-learn-07.html">Rust å­¦ä¹  07</a></li><li class="chapter-item "><a href="../../notes/rust/20220522-rust-learn-08.html">Rust å­¦ä¹  08</a></li><li class="chapter-item "><a href="../../notes/rust/20220523-rust-learn-09.html">Rust å­¦ä¹  09</a></li><li class="chapter-item "><a href="../../notes/rust/20220611-rust-learn-10.html">Rust å­¦ä¹  10</a></li><li class="chapter-item "><a href="../../notes/rust/20220619-rust-learn-11.html">Rust å­¦ä¹  11</a></li><li class="chapter-item "><a href="../../notes/rust/20220619-rust-learn-project-01.html">Rust å­¦ä¹  å®ä¾‹ 01</a></li><li class="chapter-item "><a href="../../notes/rust/20220623-rust-learn-12.html">Rust å­¦ä¹  12</a></li><li class="chapter-item "><a href="../../notes/rust/20220624-rust-learn-13.html">Rust å­¦ä¹  13</a></li><li class="chapter-item "><a href="../../notes/rust/20220925-rust-learn-14.html">Rust å­¦ä¹  14</a></li><li class="chapter-item "><a href="../../notes/rust/20220925-rust-learn-15.html">Rust å­¦ä¹  15</a></li><li class="chapter-item "><a href="../../notes/rust/20221030-rust-learn-final.html">Rust å­¦ä¹  final</a></li><li class="chapter-item "><a href="../../notes/rust/20221030-rust-learn-project-02.html">Rust å­¦ä¹  å®ä¾‹ 02</a></li></ol></li><li class="chapter-item expanded "><a href="../../notes/postgresql/index.html">PostgreSQL</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../notes/postgresql/20230502-psql-learn-01.html" class="active">PostgreSQL å­¦ä¹  01</a></li><li class="chapter-item "><a href="../../notes/postgresql/20231024-psql-learn-02.html">PostgreSQL å­¦ä¹  02</a></li><li class="chapter-item "><a href="../../notes/postgresql/20231110-psql-learn-03.html">PostgreSQL å­¦ä¹  03</a></li></ol></li><li class="chapter-item "><a href="../../notes/typechallenges/index.html">Type Challenges</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../notes/typechallenges/20230425-type-challenges-01.html">TypeScript ç±»å‹ä½“æ“ 01</a></li><li class="chapter-item "><a href="../../notes/typechallenges/20230428-type-challenges-02.html">TypeScript ç±»å‹ä½“æ“ 02</a></li></ol></li><li class="chapter-item "><li class="part-title">Miscellany</li><li class="chapter-item "><a href="../../miscellany/coding/index.html">Coding</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../miscellany/coding/20210604-scope-of-if-statement.html">if è¯­å¥çš„ä½œç”¨åŸŸ</a></li><li class="chapter-item "><a href="../../miscellany/coding/20221026-parse-math-in-c.html">C è¯­è¨€æ•°å­¦è§£æå™¨</a></li><li class="chapter-item "><a href="../../miscellany/coding/20231107-clash-system-agent.html">Cğœ†ash ç³»ç»Ÿä»£ç†</a></li><li class="chapter-item "><a href="../../miscellany/coding/20240228-use-giscus-in-mdbook.html">åœ¨ mdBook ä¸­ä½¿ç”¨ giscus æœåŠ¡</a></li></ol></li><li class="chapter-item "><a href="../../miscellany/study/index.html">Study</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../miscellany/study/20221108-qiskit-linear-algebra.html">qiskit çº¿æ€§ä»£æ•°</a></li><li class="chapter-item "><a href="../../miscellany/study/20221111-qiskit-Deutsch-Jozsa-algorithm.html">qiskit Deutsch-Jozsa ç®—æ³•</a></li></ol></li><li class="chapter-item "><a href="../../miscellany/life/index.html">Life</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../miscellany/life/20230411-about-life.html">è¯´è¯´ä»¥åçš„æ‰“ç®—ç½¢</a></li><li class="chapter-item "><a href="../../miscellany/life/20230715-about-job.html">è°ˆè°ˆæœ€è¿‘çš„å·¥ä½œçŠ¶æ€</a></li><li class="chapter-item "><a href="../../miscellany/life/20230915-end-of-summer.html">æš‘å‡ç»“æŸäº†</a></li><li class="chapter-item "><a href="../../miscellany/life/20231020-new-life.html">æ–°çš„ç”Ÿæ´»</a></li><li class="chapter-item "><a href="../../miscellany/life/20240120-busy-life.html">å¿™å¿™ç¢Œç¢Œ</a></li></ol></li></ol>
                </div>
                <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                    <div class="sidebar-resize-indicator"></div>
                </div>
            </nav>

            <script>
                var sidebarScrollbox = document.querySelector("#sidebar .sidebar-scrollbox");
                sidebarScrollbox.addEventListener(
                    "click",
                    function (e) {
                        if (e.target.tagName === "A") {
                            sessionStorage.setItem("sidebar-scroll", sidebarScrollbox.scrollTop);
                        }
                    },
                    { passive: true }
                );
                var sidebarScrollTop = sessionStorage.getItem("sidebar-scroll");
                sessionStorage.removeItem("sidebar-scroll");
                if (sidebarScrollTop) {
                    // preserve sidebar scroll position when navigating via links within sidebar
                    sidebarScrollbox.scrollTop = sidebarScrollTop;
                } else {
                    // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                    var activeSection = document.querySelector("#sidebar .active");
                    if (activeSection) {
                        activeSection.scrollIntoView({ block: "center" });
                    }
                }
            </script>

            <div id="page-wrapper" class="page-wrapper">
                <div class="page">
                                        <div id="menu-bar-hover-placeholder"></div>
                    <div id="menu-bar" class="menu-bar sticky">
                        <div class="left-buttons">
                            <label id="sidebar-toggle" class="icon-button"
                                for="sidebar-toggle-anchor"
                                title="Toggle Table of Contents"
                                aria-label="Toggle Table of Contents"
                                aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </label>
                            <button id="theme-toggle" class="icon-button"
                                type="button" title="Change theme"
                                aria-label="Change theme" aria-haspopup="true"
                                aria-expanded="false"
                                aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup"
                                aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem"
                                        class="theme"
                                        id="light">Light</button></li>
                                <li role="none"><button role="menuitem"
                                        class="theme"
                                        id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem"
                                        class="theme"
                                        id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem"
                                        class="theme"
                                        id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem"
                                        class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            <button id="search-toggle" class="icon-button"
                                type="button" title="Search. (Shortkey: s)"
                                aria-label="Toggle Searchbar"
                                aria-expanded="false" aria-keyshortcuts="S"
                                aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                        </div>
                        <h1 class="menu-title">Kevin Stephen&#x27;s Blogs</h1>
                        <div class="right-buttons">
                            <a href="https://github.com/kands-code/kands-code.github.io"
                                title="Git repository"
                                aria-label="Git repository">
                                <i id="git-repository-button"
                                    class="fa fa-github"></i>
                            </a>
                            <a href="https://github.com/kands-code/kands-code.github.io/edit/repo-src/src/src/notes/postgresql/20230502-psql-learn-01.md"
                                title="Suggest an edit"
                                aria-label="Suggest an edit">
                                <i id="git-edit-button" class="fa fa-edit"></i>
                            </a>
                        </div>
                    </div>
                    <div id="search-wrapper" class="hidden">
                        <form id="searchbar-outer" class="searchbar-outer">
                            <input type="search" id="searchbar" name="searchbar"
                                placeholder="searching..."
                                aria-controls="searchresults-outer"
                                aria-describedby="searchresults-header">
                        </form>
                        <div id="searchresults-outer"
                            class="searchresults-outer hidden">
                            <div id="searchresults-header"
                                class="searchresults-header"></div>
                            <ul id="searchresults">
                            </ul>
                        </div>
                    </div>
                    <script>
                        document
                            .getElementById("sidebar-toggle")
                            .setAttribute("aria-expanded", sidebar === "visible");
                        document
                            .getElementById("sidebar")
                            .setAttribute("aria-hidden", sidebar !== "visible");
                        Array.from(document.querySelectorAll("#sidebar a")).forEach(function (link) {
                            link.setAttribute("tabIndex", sidebar === "visible" ? 0 : -1);
                        });
                    </script>

                    <div id="content" class="content">
                        <main><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<h1 id="postgresql-å­¦ä¹ -01"><a class="header" href="#postgresql-å­¦ä¹ -01">PostgreSQL å­¦ä¹  01</a></h1>
<p class="archive-time">archive time: 2023-05-02</p>
<p class="sp-comment">ä»Šå¤©æ¥é‡æ–°å­¦ä¹ ä¸€ä¸‹ PostgreSQL</p>
<ul>
<li><a href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93">åˆ›å»ºæ•°æ®åº“</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%A0%BC">åˆ›å»ºè¡¨æ ¼</a></li>
<li><a href="#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE">æ’å…¥æ•°æ®</a></li>
<li><a href="#%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE">æŸ¥è¯¢æ•°æ®</a></li>
<li><a href="#%E7%AD%9B%E9%80%89%E6%95%B0%E6%8D%AE">ç­›é€‰æ•°æ®</a></li>
</ul>
<p>ä¹‹å‰æœ‰æ›´æ–°è¿‡å‡ æ¬¡æœ‰å…³ SQL çš„å­¦ä¹ è®°å½•åšå®¢ï¼Œ
ä½†æ˜¯ç”±äºæ²¡æœ‰åšæŒä¸‹æ¥æˆ–è€…æ²¡æœ‰è®°å½•ï¼Œæœ€åè¢«æˆ‘åˆ é™¤äº†</p>
<p>æœ€è¿‘æˆ‘å‘ç°äº†ä¸€ä¸ªè§†é¢‘ç³»åˆ—:
<strong><em>SQL and PostgreSQL The Complete Developerâ€™s Guide</em></strong>ï¼Œ
æˆ‘æ‰“ç®—è·Ÿç€è¿™ä¸ªè§†é¢‘ç³»åˆ—æ¥é‡æ–°å­¦ä¹ ä¸€ä¸‹ PostgreSQL</p>
<h2 id="åˆ›å»ºæ•°æ®åº“"><a class="header" href="#åˆ›å»ºæ•°æ®åº“">åˆ›å»ºæ•°æ®åº“</a></h2>
<p>å…³äº PostgreSQL æ•°æ®åº“çš„å®‰è£…å’Œé…ç½®æˆ‘åœ¨è¿™é‡Œå°±ä¸å†å¤šè¯´ï¼Œ
Linux ä¸Šå¯ä»¥å‚ç…§ <a href="https://wiki.archlinux.org/title/PostgreSQL">Arch Wiki</a>ï¼Œ
Windows æˆ–è€…å…¶ä»–å¹³å°å¯ä»¥æŒ‰ç…§ PostgreSQL çš„æ–‡æ¡£æ¥å®‰è£…</p>
<p>å®‰è£…å¥½åï¼Œè¿˜éœ€è¦åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œ
è¿™ä¸ªæ•°æ®åº“å°±æ˜¯ç»ƒä¹  SQL çš„åœ°æ–¹ï¼Œå¯ä»¥ä½¿ç”¨ <code>createdb</code> å‘½ä»¤:</p>
<pre><code class="language-shell">createdb "&lt;database name&gt;"
</code></pre>
<p>è¿™é‡Œçš„ <code>"&lt;database name&gt;"</code> å¯ä»¥æ›¿æ¢ä¸ºä½ æƒ³è¦çš„åå­—ï¼Œæˆ‘è¿™é‡Œå°±æ˜¯ <code>psqldev</code></p>
<p>åˆ›å»ºå¥½åè¿æ¥æ•°æ®åº“ï¼Œå¯ä»¥ä½¿ç”¨ <code>psql</code> å‘½ä»¤æ¥é“¾æ¥</p>
<pre><code class="language-shell">psql "&lt;database name&gt;"
</code></pre>
<p>è¿™é‡Œè¦æ³¨æ„ç”¨æˆ·æ˜¯å¦æ­£ç¡®ï¼Œå¦‚æœé“¾æ¥ä¸ä¸Šæˆ–è€…å‡ºé”™ï¼Œå¯ä»¥æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦æ˜¯ PostgreSQL çš„æœåŠ¡æ²¡æœ‰å¯åŠ¨:</p>
<pre><code class="language-shell"># å¦‚æœä½¿ç”¨ systemd ç®¡ç†
systemctl status postgresql.service
</code></pre>
<p>å¦‚æœæœåŠ¡æ­£å¸¸ï¼Œé‚£ä¹ˆè¦æƒ³æƒ³æ˜¯ä¸æ˜¯æ²¡æœ‰æ·»åŠ ç”¨æˆ·ååˆ° PostgreSQL å¯¼è‡´æ— æ³•é“¾æ¥ï¼Œå…·ä½“æ“ä½œè¯·å‚ç…§ <a href="https://wiki.archlinux.org/title/PostgreSQL">Arch Wiki</a></p>
<p>å¦‚æœéƒ½æ²¡æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆæ­å–œï¼Œä¸€ä¸ªæ•°æ®åº“å°±åˆ›å»ºå¥½äº†</p>
<h2 id="åˆ›å»ºè¡¨æ ¼"><a class="header" href="#åˆ›å»ºè¡¨æ ¼">åˆ›å»ºè¡¨æ ¼</a></h2>
<p>æ•°æ®åº“çš„ç»“æ„å¯ä»¥ç±»æ¯”äº <em>Microsoft Excel</em>ï¼Œ
æ•°æ®åº“å°±æ˜¯ä¸€ä¸ª <code>*.xlsx</code> æ ¼å¼çš„æ–‡ä»¶ï¼Œè€Œæ•°æ®åº“é‡Œçš„æ¯ä¸ªè¡¨ï¼Œå°±æ˜¯å¯¹åº”äºæ–‡ä»¶ä¸­çš„ä¸€å¼ è¡¨æ ¼ï¼Œ
æ•°æ®åº“ä¸­çš„ä¸€ä¸ªæ•°æ®ï¼Œå°±å¯¹åº”äºè¡¨ä¸­çš„ä¸€è¡Œå†…å®¹</p>
<p>è¦å­˜å‚¨æ•°æ®åˆ°æ•°æ®åº“ä¸­ï¼Œé¦–å…ˆè¦åˆ›å»ºä¸€å¼ å­˜å‚¨æ•°æ®çš„è¡¨ï¼Œ
è¿™é‡ŒæŒ‰ç…§è§†é¢‘é‡Œçš„å†…å®¹ï¼Œè¡¨ä¸­è¦å­˜æ”¾åŸå¸‚çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬å››ä¸ªå­—æ®µ</p>
<ul>
<li>åŸå¸‚å§“å</li>
<li>åŸå¸‚å±äºå“ªä¸ªå›½å®¶</li>
<li>åŸå¸‚çš„äººå£</li>
<li>åŸå¸‚çš„é¢ç§¯</li>
</ul>
<p>ç¡®å®šå¥½è¡¨çš„å†…å®¹åï¼Œè¿˜éœ€è¦ç¡®å®šæ¯ä¸ªå­—æ®µçš„ç±»å‹ï¼Œ
PostgreSQL æ‰€æ”¯æŒçš„ç±»å‹å¯ä»¥åœ¨
<a href="https://www.postgresql.org/docs/current/datatype.html">æ–‡æ¡£</a> ä¸­æŸ¥è¯¢</p>
<p>è¿™é‡Œï¼ŒåŸå¸‚å§“åå’Œå›½å®¶é€‰æ‹©ä½¿ç”¨ <code>character varying(n)</code> ç±»å‹ï¼Œ
å…¶ä¸­ <code>n</code> ä»£è¡¨æœ€å¤§å­—ç¬¦æ•°é‡ï¼Œåœ¨è¿™é‡Œï¼Œ<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">64</span></span></span></span> å°±æ˜¯ä¸ªä¸é”™çš„æ•°å­—ï¼Œ
è€Œäººå£å’Œé¢ç§¯ä½¿ç”¨ <code>integer</code> ç±»å‹</p>
<p>æ¯ä¸ªè¡¨æ ¼éƒ½éœ€è¦ä¸€ä¸ªç´¢å¼•ç”¨çš„å­—æ®µï¼Œç§°ä¸º <strong>ä¸»é”®</strong>ï¼Œå¯¹åº”å…³é”®å­—å°±æ˜¯ <code>primary key</code>ï¼Œ
ä¸»é”®è¦æ±‚å­—æ®µå†…å®¹å”¯ä¸€ï¼Œè¿™é‡Œå¯ä»¥é€‰æ‹©åŸå¸‚çš„å§“åä½œä¸ºä¸»é”®</p>
<p>ç»¼ä¸Šï¼Œåˆ›å»ºåŸå¸‚è¡¨çš„ä»£ç å¦‚ä¸‹</p>
<pre><code class="language-pgsql">create table cities (
  name character varying(64) primary key,
  country character varying(64),
  population integer,
  area integer
);
</code></pre>
<p><code>create table</code> å°±æ˜¯è¦åˆ›å»ºä¸€ä¸ªè¡¨ï¼Œ<code>cities</code> æ˜¯è¡¨çš„åå­—ï¼Œ
æ‹¬å·é‡Œé¢æ˜¯è¡¨ä¸­çš„å­—æ®µï¼Œä½¿ç”¨é€—å·åˆ†éš”ï¼Œ
æ¯ä¸ªå­—æ®µçš„åŸºæœ¬æ ¼å¼æ˜¯ <code>&lt;column&gt; &lt;type&gt; [primary key]</code>ï¼Œä¸€å¼ è¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®</p>
<p>å¦‚æ­¤ä¸€æ¥ï¼Œè¿™ä¸ªåŸå¸‚è¡¨å°±åˆ›å»ºå¥½äº†</p>
<h2 id="æ’å…¥æ•°æ®"><a class="header" href="#æ’å…¥æ•°æ®">æ’å…¥æ•°æ®</a></h2>
<p>æ’å…¥æ•°æ®åˆ°æŸä¸ªè¡¨ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>insert into</code> è¯­å¥æ¥å®ç°</p>
<pre><code class="language-pgsql">insert into &lt;table name&gt; (..., &lt;cols&gt;)
values (..., &lt;vals&gt;),
  ...
  (..., &lt;vals&gt;)
</code></pre>
<p>è¿™é‡Œ <code>&lt;table name&gt;</code> å°±æ˜¯è¦æ’å…¥çš„è¡¨çš„åå­—ï¼Œ<code>&lt;cols&gt;</code> è¡¨ç¤ºæ’å…¥æ•°æ®å¯¹åº”çš„å­—æ®µåï¼Œ
è€Œ <code>&lt;vals&gt;</code> åˆ™æ˜¯æ’å…¥çš„æ•°æ®ï¼Œæ•°æ®é¡ºåºè¦å’Œ <code>&lt;cols&gt;</code> ä¸­æŒ‡å®šçš„ä¸€è‡´ï¼Œä¾‹å¦‚:</p>
<pre><code class="language-pgsql">insert into cities (name, country, population, area)
values ('Tokyo', 'Japan', 37732000, 8231),
  ('Delhi', 'India', 32226000, 2344),
  ('Shanghai', 'China', 24073000, 4333),
  ('Sao Paulo', 'Brazil', 23086000, 3649);
</code></pre>
<p>è¿™é‡Œçš„æ•°æ®æ‘˜è‡ª Wikipediaï¼Œäººå£å’Œé¢ç§¯å‡æŒ‡çš„æ˜¯åŸé•‡ï¼ˆUrbanï¼‰äººå£</p>
<h2 id="æŸ¥è¯¢æ•°æ®"><a class="header" href="#æŸ¥è¯¢æ•°æ®">æŸ¥è¯¢æ•°æ®</a></h2>
<p>è¦æŸ¥çœ‹è¡¨çš„å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨ <code>select</code> è¯­å¥</p>
<p><img src="../../assert/img/psql-learn-01-pic01.png" alt="citiesè¡¨å†…å®¹" /></p>
<p>å…¶ä¸­ <code>*</code> æ˜¯ä¸€ä¸ªé€šé…ç¬¦ï¼Œè¡¨ç¤ºæ‰€æœ‰çš„å­—æ®µï¼Œä¸€èˆ¬ <code>select</code> çš„è¯­æ³•å¦‚ä¸‹:</p>
<pre><code class="language-pgsql">select ..., &lt;cols&gt; from &lt;table name&gt;;
</code></pre>
<p><code>&lt;cols&gt;</code> å°±æ˜¯å­—æ®µåï¼Œå¯ä»¥é‡å¤ï¼Œå¹¶ä¸”è¿˜å¯ä»¥åœ¨æŸ¥è¯¢æ—¶åšä¸€äº›è¿ç®—å’Œé‡å‘½åï¼Œä¾‹å¦‚</p>
<pre><code class="language-pgsql">select name,
  cast(population as real) / cast(area as real) as "population density"
from cities;
</code></pre>
<p>æŸ¥è¯¢ç»“æœå¦‚ä¸‹:</p>
<p><img src="../../assert/img/psql-learn-01-pic02.png" alt="ç®€å•æŸ¥è¯¢è¿ç®—ç¤ºä¾‹" /></p>
<p>å…¶ä¸­ï¼Œåœ¨ PostgreSQL ä¸­ï¼Œå•å¼•å·è¡¨ç¤ºå­—ç¬¦ä¸²å­—é¢å€¼ï¼Œ
è€ŒåŒå¼•å·å¯ä»¥ç”¨æ¥è¡¨ç¤ºå­—æ®µåè¿™ç§ç‰¹æ®Šçš„ <em>åç§°</em>ï¼Œ
<code>cast(&lt;col&gt; as &lt;type&gt;)</code> æ˜¯ä¸€ç§ç±»å‹è½¬æ¢ï¼Œè¡¨ç¤ºæŠŠæŸä¸€ä¸ªå­—æ®µè½¬å˜ä¸º <code>&lt;type&gt;</code> ç±»å‹ï¼Œ
è¿™é‡Œç”±äºè¦åšé™¤æ³•è¿ç®—ï¼Œæ‰€ä»¥ä» <code>integer</code> ç±»å‹è½¬ä¸ºäº† <code>real</code> ç±»å‹ï¼Œ
è€Œæ•´ä¸ªè¿ç®—çš„ç»“æœä½¿ç”¨ <code>as</code> èµ·äº†ä¸€ä¸ªå­—æ®µåˆ«å <code>population density</code></p>
<p>å¸¸è§æ•°å­¦è¿ç®—:</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">è¿ç®—</th><th style="text-align: center">ç¬¦å·æˆ–å‡½æ•°</th></tr></thead><tbody>
<tr><td style="text-align: center">åŠ æ³•</td><td style="text-align: center"><code>+</code></td></tr>
<tr><td style="text-align: center">å‡æ³•</td><td style="text-align: center"><code>-</code></td></tr>
<tr><td style="text-align: center">ä¹˜æ³•</td><td style="text-align: center"><code>*</code></td></tr>
<tr><td style="text-align: center">é™¤æ³•</td><td style="text-align: center"><code>/</code></td></tr>
<tr><td style="text-align: center">å–ä½™</td><td style="text-align: center"><code>%</code></td></tr>
<tr><td style="text-align: center">ä¹˜æ–¹</td><td style="text-align: center"><code>^</code></td></tr>
<tr><td style="text-align: center">å¹³æ–¹æ ¹ï¼Œç«‹æ–¹æ ¹</td><td style="text-align: center"><code>|/</code>ï¼Œ<code>||/</code></td></tr>
<tr><td style="text-align: center">ç»å¯¹å€¼</td><td style="text-align: center"><code>@</code></td></tr>
<tr><td style="text-align: center">ä½ä¸æˆ–é</td><td style="text-align: center"><code>&amp;</code>ï¼Œ<code>|</code>ï¼Œ<code>~</code></td></tr>
<tr><td style="text-align: center">ä½å¼‚æˆ–</td><td style="text-align: center"><code>#</code></td></tr>
<tr><td style="text-align: center">ä½å·¦ç§»å³ç§»</td><td style="text-align: center"><code>&lt;&lt;</code>ï¼Œ<code>&gt;&gt;</code></td></tr>
</tbody></table>
</div>
<p>å¯¹äºå­—ç¬¦ä¸²ï¼Œæˆ–è€…æ–‡æœ¬å€¼ï¼Œä¹Ÿæœ‰ä¸€å¥—æ“ä½œç¬¦æˆ–å‡½æ•°å¯ä»¥ä½¿ç”¨:</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">å­—ç¬¦ä¸²è¿ç®—</th><th style="text-align: center">ç¬¦å·æˆ–å‡½æ•°</th></tr></thead><tbody>
<tr><td style="text-align: center">æ‹¼æ¥</td><td style="text-align: center"><code>||</code></td></tr>
<tr><td style="text-align: center">è½¬ä¸ºå¤§å†™</td><td style="text-align: center"><code>upper()</code></td></tr>
<tr><td style="text-align: center">è½¬ä¸ºå°å†™</td><td style="text-align: center"><code>lower()</code></td></tr>
<tr><td style="text-align: center">å­—ç¬¦é•¿åº¦</td><td style="text-align: center"><code>character_length()</code></td></tr>
<tr><td style="text-align: center">ä½é•¿åº¦</td><td style="text-align: center"><code>bit_length()</code></td></tr>
<tr><td style="text-align: center">å­—èŠ‚é•¿åº¦</td><td style="text-align: center"><code>octet_length()</code></td></tr>
</tbody></table>
</div>
<h2 id="ç­›é€‰æ•°æ®"><a class="header" href="#ç­›é€‰æ•°æ®">ç­›é€‰æ•°æ®</a></h2>
<p>åœ¨æŸ¥è¯¢æ—¶ï¼Œè¿˜å¯ä»¥æ·»åŠ ä¸€äº›æ¡ä»¶ä½œä¸ºç­›é€‰ï¼ˆfilterï¼‰</p>
<p>ä¸€èˆ¬é€»è¾‘å…³ç³»å¯ä»¥æœ‰:</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">å…³ç³»æˆ–æ“ä½œ</th><th style="text-align: center">ç¬¦å·</th></tr></thead><tbody>
<tr><td style="text-align: center">ä¸æˆ–é</td><td style="text-align: center"><code>and</code>ï¼Œ<code>or</code>ï¼Œ<code>not</code></td></tr>
<tr><td style="text-align: center">å¤§äºï¼Œå¤§äºç­‰äº</td><td style="text-align: center"><code>&gt;</code>ï¼Œ<code>&gt;=</code></td></tr>
<tr><td style="text-align: center">å°äºï¼Œå°äºç­‰äº</td><td style="text-align: center"><code>&lt;</code>ï¼Œ<code>&lt;=</code></td></tr>
<tr><td style="text-align: center">ç­‰äº</td><td style="text-align: center"><code>=</code></td></tr>
<tr><td style="text-align: center">ä¸ç­‰</td><td style="text-align: center"><code>&lt;&gt;</code> æˆ– <code>!=</code></td></tr>
<tr><td style="text-align: center">åœ¨ä¸€ä¸ªèŒƒå›´å†…</td><td style="text-align: center"><code>between</code></td></tr>
<tr><td style="text-align: center">åœ¨ä¸€ä¸ªåˆ—è¡¨å†…</td><td style="text-align: center"><code>in</code></td></tr>
<tr><td style="text-align: center">ä¸å†èŒƒå›´æˆ–åˆ—è¡¨å†…</td><td style="text-align: center"><code>not between</code>ï¼Œ<code>not in</code></td></tr>
<tr><td style="text-align: center">æœ‰åˆ«äº</td><td style="text-align: center"><code>is distinct from</code></td></tr>
<tr><td style="text-align: center">æ˜¯ NULL</td><td style="text-align: center"><code>is null</code></td></tr>
</tbody></table>
</div>
<p>å…¶ä¸­ä¸€äº›è¯­å¥çš„ç¤ºä¾‹</p>
<p><img src="../../assert/img/psql-learn-01-pic03.png" alt="æ¯”è¾ƒæ“ä½œç¤ºä¾‹" /></p>
<p>è€Œç­›é€‰åˆ™ä½¿ç”¨ <code>where</code> è¯­å¥ï¼Œä¾‹å¦‚:</p>
<pre><code class="language-pgsql">select name,
  area
from cities
where area &gt; 4000;
</code></pre>
<p>æŸ¥è¯¢ç»“æœå¦‚ä¸‹</p>
<p><img src="../../assert/img/psql-learn-01-pic04.png" alt="ç®€å•æŸ¥è¯¢ç­›é€‰ç¤ºä¾‹" /></p>
<p>åœ¨ <code>where</code> ä¸­åŒæ ·å¯ä»¥ä½¿ç”¨æ•°å­¦è¿ç®—å’Œä¸€äº›å‡½æ•°</p>
<hr />
<p>ä»Šå¤©å°±æš‚æ—¶æŠŠä¸€äº›åŸºç¡€å†…å®¹è¿‡äº†ä¸€éï¼Œ
åç»­è¿˜æœ‰ <code>update</code> å’Œ <code>delete</code> ä»€ä¹ˆçš„ï¼Œé‚£å°±ç•™åˆ°ä¸‹æ¬¡æŠŠ</p>
</main>
                        <nav class="nav-wrapper" aria-label="Page navigation">
                            <a rel="prev" href="../../notes/postgresql/index.html"
                                class="mobile-nav-chapters previous"
                                title="Previous chapter"
                                aria-label="Previous chapter"
                                aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next prefetch"
                                href="../../notes/postgresql/20231024-psql-learn-02.html"
                                class="mobile-nav-chapters next"
                                title="Next chapter" aria-label="Next chapter"
                                aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                            <div style="clear: both"></div>
                        </nav>
                    </div>
                </div>
                <div class="giscus-comment">
                </div>
                <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../notes/postgresql/index.html"
                        class="nav-chapters previous" title="Previous chapter"
                        aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next prefetch" href="../../notes/postgresql/20231024-psql-learn-02.html"
                        class="nav-chapters next" title="Next chapter"
                        aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                </nav>
            </div>
            <script>
                window.playground_copyable = true;
            </script>
            <script src="../../elasticlunr.min.js"></script>
            <script src="../../mark.min.js"></script>
            <script src="../../searcher.js"></script>
            <script src="../../clipboard.min.js"></script>
            <script src="../../highlight.js"></script>
            <script src="../../book.js"></script>
            <script src="../../theme/giscus.js"></script>
        </div>
    </body>
</html>
