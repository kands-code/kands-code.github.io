<!DOCTYPE HTML>
<html
    lang="zh-Hans" 
    class="rust" 
    dir="ltr"> 
    <head>
        <title>Rust å­¦ä¹  08 - Kevin Stephen&#x27;s Blogs</title> 
        <meta charset="UTF-8">
        <meta name="description" content="æ‰¾åˆ°å±äºè‡ªå·±çš„å…‰">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">
        
         
        <link rel="icon" href="../../favicon.svg">
         
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">

        <link rel="stylesheet"
            href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <link rel="stylesheet" href="../../theme/utils.css">

    </head>
    <body class="sidebar-visible no-js">
        <div id="body-container">
            <script>
                // è·å– root è·¯å¾„
                var path_to_root = "../../";
                // è·å–é»˜è®¤ä¸»é¢˜
                var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches
                    ? "ayu"
                    : "rust";
            </script>
            <script>
                try {
                    var theme = localStorage.getItem("mdbook-theme");
                    var sidebar = localStorage.getItem("mdbook-sidebar");

                    if (theme.startsWith('"') && theme.endsWith('"')) {
                        localStorage.setItem(
                            "mdbook-theme",
                            theme.slice(1, theme.length - 1).trim()
                        );
                    }

                    if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                        localStorage.setItem(
                            "mdbook-sidebar",
                            sidebar.slice(1, sidebar.length - 1).trim()
                        );
                    }
                } catch (e) {}
            </script>
            <script>
                var theme;
                try {
                    theme = localStorage.getItem("mdbook-theme");
                } catch (e) {}
                if (theme === null || theme === undefined) {
                    theme = default_theme;
                }
                var html = document.querySelector("html");
                html.classList.remove("rust");
                html.classList.add(theme);
                var body = document.querySelector("body");
                body.classList.remove("no-js");
                body.classList.add("js");
            </script>

            <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">
            <script>
                var body = document.querySelector("body");
                var sidebar = null;
                var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
                if (document.body.clientWidth >= 1080) {
                try {
                    sidebar = localStorage.getItem("mdbook-sidebar");
                } catch (e) {}
                    sidebar = sidebar || "visible";
                } else {
                    sidebar = "hidden";
                }
                sidebar_toggle.checked = sidebar === "visible";
                body.classList.remove("sidebar-visible");
                body.classList.add("sidebar-" + sidebar);
            </script>

            <nav id="sidebar" class="sidebar" aria-label="Table of contents">
                <div class="sidebar-scrollbox">
                    <ol class="chapter"><li class="chapter-item affix "><a href="../../init.html">Init</a></li><li class="chapter-item affix "><li class="part-title">Notes</li><li class="chapter-item expanded "><a href="../../notes/rust/index.html">Rust</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../notes/rust/20210605-rust-learn-01.html">Rust å­¦ä¹  01</a></li><li class="chapter-item "><a href="../../notes/rust/20210610-rust-learn-02.html">Rust å­¦ä¹  02</a></li><li class="chapter-item "><a href="../../notes/rust/20210824-rust-learn-03.html">Rust å­¦ä¹  03</a></li><li class="chapter-item "><a href="../../notes/rust/20211216-rust-learn-04.html">Rust å­¦ä¹  04</a></li><li class="chapter-item "><a href="../../notes/rust/20220512-rust-learn-05.html">Rust å­¦ä¹  05</a></li><li class="chapter-item "><a href="../../notes/rust/20220514-rust-learn-06.html">Rust å­¦ä¹  06</a></li><li class="chapter-item "><a href="../../notes/rust/20220520-rust-learn-07.html">Rust å­¦ä¹  07</a></li><li class="chapter-item expanded "><a href="../../notes/rust/20220522-rust-learn-08.html" class="active">Rust å­¦ä¹  08</a></li><li class="chapter-item "><a href="../../notes/rust/20220523-rust-learn-09.html">Rust å­¦ä¹  09</a></li><li class="chapter-item "><a href="../../notes/rust/20220611-rust-learn-10.html">Rust å­¦ä¹  10</a></li><li class="chapter-item "><a href="../../notes/rust/20220619-rust-learn-11.html">Rust å­¦ä¹  11</a></li><li class="chapter-item "><a href="../../notes/rust/20220619-rust-learn-project-01.html">Rust å­¦ä¹  å®ä¾‹ 01</a></li><li class="chapter-item "><a href="../../notes/rust/20220623-rust-learn-12.html">Rust å­¦ä¹  12</a></li><li class="chapter-item "><a href="../../notes/rust/20220624-rust-learn-13.html">Rust å­¦ä¹  13</a></li><li class="chapter-item "><a href="../../notes/rust/20220925-rust-learn-14.html">Rust å­¦ä¹  14</a></li><li class="chapter-item "><a href="../../notes/rust/20220925-rust-learn-15.html">Rust å­¦ä¹  15</a></li><li class="chapter-item "><a href="../../notes/rust/20221030-rust-learn-final.html">Rust å­¦ä¹  final</a></li><li class="chapter-item "><a href="../../notes/rust/20221030-rust-learn-project-02.html">Rust å­¦ä¹  å®ä¾‹ 02</a></li></ol></li><li class="chapter-item "><a href="../../notes/postgresql/index.html">PostgreSQL</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../notes/postgresql/20230502-psql-learn-01.html">PostgreSQL å­¦ä¹  01</a></li><li class="chapter-item "><a href="../../notes/postgresql/20231024-psql-learn-02.html">PostgreSQL å­¦ä¹  02</a></li><li class="chapter-item "><a href="../../notes/postgresql/20231110-psql-learn-03.html">PostgreSQL å­¦ä¹  03</a></li></ol></li><li class="chapter-item "><a href="../../notes/typechallenges/index.html">Type Challenges</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../notes/typechallenges/20230425-type-challenges-01.html">TypeScript ç±»å‹ä½“æ“ 01</a></li><li class="chapter-item "><a href="../../notes/typechallenges/20230428-type-challenges-02.html">TypeScript ç±»å‹ä½“æ“ 02</a></li></ol></li><li class="chapter-item "><li class="part-title">Miscellany</li><li class="chapter-item "><a href="../../miscellany/coding/index.html">Coding</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../miscellany/coding/20210604-scope-of-if-statement.html">if è¯­å¥çš„ä½œç”¨åŸŸ</a></li><li class="chapter-item "><a href="../../miscellany/coding/20221026-parse-math-in-c.html">C è¯­è¨€æ•°å­¦è§£æå™¨</a></li><li class="chapter-item "><a href="../../miscellany/coding/20231107-clash-system-agent.html">Cğœ†ash ç³»ç»Ÿä»£ç†</a></li><li class="chapter-item "><a href="../../miscellany/coding/20240228-use-giscus-in-mdbook.html">åœ¨ mdBook ä¸­ä½¿ç”¨ giscus æœåŠ¡</a></li></ol></li><li class="chapter-item "><a href="../../miscellany/study/index.html">Study</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../miscellany/study/20221108-qiskit-linear-algebra.html">qiskit çº¿æ€§ä»£æ•°</a></li><li class="chapter-item "><a href="../../miscellany/study/20221111-qiskit-Deutsch-Jozsa-algorithm.html">qiskit Deutsch-Jozsa ç®—æ³•</a></li></ol></li><li class="chapter-item "><a href="../../miscellany/life/index.html">Life</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../miscellany/life/20230411-about-life.html">è¯´è¯´ä»¥åçš„æ‰“ç®—ç½¢</a></li><li class="chapter-item "><a href="../../miscellany/life/20230715-about-job.html">è°ˆè°ˆæœ€è¿‘çš„å·¥ä½œçŠ¶æ€</a></li><li class="chapter-item "><a href="../../miscellany/life/20230915-end-of-summer.html">æš‘å‡ç»“æŸäº†</a></li><li class="chapter-item "><a href="../../miscellany/life/20231020-new-life.html">æ–°çš„ç”Ÿæ´»</a></li><li class="chapter-item "><a href="../../miscellany/life/20240120-busy-life.html">å¿™å¿™ç¢Œç¢Œ</a></li></ol></li><li class="chapter-item "><li class="part-title">About</li></ol>
                </div>
                <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                    <div class="sidebar-resize-indicator"></div>
                </div>
            </nav>

            <script>
                var sidebarScrollbox = document.querySelector("#sidebar .sidebar-scrollbox");
                sidebarScrollbox.addEventListener(
                    "click",
                    function (e) {
                        if (e.target.tagName === "A") {
                            sessionStorage.setItem("sidebar-scroll", sidebarScrollbox.scrollTop);
                        }
                    },
                    { passive: true }
                );
                var sidebarScrollTop = sessionStorage.getItem("sidebar-scroll");
                sessionStorage.removeItem("sidebar-scroll");
                if (sidebarScrollTop) {
                    // preserve sidebar scroll position when navigating via links within sidebar
                    sidebarScrollbox.scrollTop = sidebarScrollTop;
                } else {
                    // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                    var activeSection = document.querySelector("#sidebar .active");
                    if (activeSection) {
                        activeSection.scrollIntoView({ block: "center" });
                    }
                }
            </script>

            <div id="page-wrapper" class="page-wrapper">
                <div class="page">
                                        <div id="menu-bar-hover-placeholder"></div>
                    <div id="menu-bar" class="menu-bar sticky">
                        <div class="left-buttons">
                            <label id="sidebar-toggle" class="icon-button"
                                for="sidebar-toggle-anchor"
                                title="Toggle Table of Contents"
                                aria-label="Toggle Table of Contents"
                                aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </label>
                            <button id="theme-toggle" class="icon-button"
                                type="button" title="Change theme"
                                aria-label="Change theme" aria-haspopup="true"
                                aria-expanded="false"
                                aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup"
                                aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem"
                                        class="theme"
                                        id="light">Light</button></li>
                                <li role="none"><button role="menuitem"
                                        class="theme"
                                        id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem"
                                        class="theme"
                                        id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem"
                                        class="theme"
                                        id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem"
                                        class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            <button id="search-toggle" class="icon-button"
                                type="button" title="Search. (Shortkey: s)"
                                aria-label="Toggle Searchbar"
                                aria-expanded="false" aria-keyshortcuts="S"
                                aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                        </div>
                        <h1 class="menu-title">Kevin Stephen&#x27;s Blogs</h1>
                        <div class="right-buttons">
                            <a href="https://github.com/kands-code/kands-code.github.io"
                                title="Git repository"
                                aria-label="Git repository">
                                <i id="git-repository-button"
                                    class="fa fa-github"></i>
                            </a>
                            <a href="https://github.com/kands-code/kands-code.github.io/edit/repo-src/src/src/notes/rust/20220522-rust-learn-08.md"
                                title="Suggest an edit"
                                aria-label="Suggest an edit">
                                <i id="git-edit-button" class="fa fa-edit"></i>
                            </a>
                        </div>
                    </div>
                    <div id="search-wrapper" class="hidden">
                        <form id="searchbar-outer" class="searchbar-outer">
                            <input type="search" id="searchbar" name="searchbar"
                                placeholder="searching..."
                                aria-controls="searchresults-outer"
                                aria-describedby="searchresults-header">
                        </form>
                        <div id="searchresults-outer"
                            class="searchresults-outer hidden">
                            <div id="searchresults-header"
                                class="searchresults-header"></div>
                            <ul id="searchresults">
                            </ul>
                        </div>
                    </div>
                    <script>
                        document
                            .getElementById("sidebar-toggle")
                            .setAttribute("aria-expanded", sidebar === "visible");
                        document
                            .getElementById("sidebar")
                            .setAttribute("aria-hidden", sidebar !== "visible");
                        Array.from(document.querySelectorAll("#sidebar a")).forEach(function (link) {
                            link.setAttribute("tabIndex", sidebar === "visible" ? 0 : -1);
                        });
                    </script>

                    <div id="content" class="content">
                        <main><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<h1 id="rust-å­¦ä¹ -08"><a class="header" href="#rust-å­¦ä¹ -08">Rust å­¦ä¹  08</a></h1>
<p class="archive-time">archive time: 2022-05-22</p>
<p class="sp-comment">ä»Šå¤©çœ‹çœ‹ Rust é‡Œçš„å®¹å™¨</p>
<ul>
<li><a href="#%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8">å¸¸ç”¨å®¹å™¨</a>
<ul>
<li><a href="#vector">Vector</a>
<ul>
<li><a href="#%E6%89%80%E6%9C%89%E6%9D%83%E5%92%8C%E5%80%9F%E7%94%A8%E8%A7%84%E5%88%99">æ‰€æœ‰æƒå’Œå€Ÿç”¨è§„åˆ™</a></li>
<li><a href="#%E9%81%8D%E5%8E%86%E5%85%83%E7%B4%A0">éå†å…ƒç´ </a></li>
<li><a href="#example">Example</a></li>
</ul>
</li>
<li><a href="#string">String</a>
<ul>
<li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8B%BC%E6%8E%A5">å­—ç¬¦ä¸²æ‹¼æ¥</a></li>
<li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%A1%A8%E7%A4%BA">å­—ç¬¦ä¸²è¡¨ç¤º</a></li>
</ul>
</li>
<li><a href="#hashmapk-v"><code>HashMap&lt;K, V&gt;</code></a>
<ul>
<li><a href="#%E5%88%9B%E5%BB%BA">åˆ›å»º</a></li>
<li><a href="#%E9%81%8D%E5%8E%86">éå†</a></li>
<li><a href="#%E6%9B%B4%E6%96%B0">æ›´æ–°</a></li>
<li><a href="#hash-%E5%87%BD%E6%95%B0">Hash å‡½æ•°</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="å¸¸ç”¨å®¹å™¨"><a class="header" href="#å¸¸ç”¨å®¹å™¨">å¸¸ç”¨å®¹å™¨</a></h2>
<p>è¿™äº›å®¹å™¨åŒºåˆ«äºæ•°ç»„çš„é‡è¦çš„ä¸€ç‚¹å°±æ˜¯, å®¹å™¨çš„å®¹é‡ä¼šåŠ¨æ€å˜åŒ–</p>
<h3 id="vector"><a class="header" href="#vector">Vector</a></h3>
<p><code>Vec&lt;T&gt;</code> å°±æ˜¯ Vector ç±»å‹, ç”±æ ‡å‡†åº“æä¾›, å¯ä»¥å­˜å‚¨å¤šä¸ªç›¸åŒç±»å‹çš„å€¼</p>
<p>ä½¿ç”¨ <code>Vec::new()</code> ä¼šè¿”å›ä¸€ä¸ªç©ºçš„ Vector, æ‰€ä»¥éœ€è¦æ ‡æ³¨ç±»å‹</p>
<pre><code class="language-rust">let v: Vec&lt;u8&gt; = Vec::new();</code></pre>
<p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨åˆå§‹å€¼æ¥åˆ›å»º</p>
<pre><code class="language-rust">// int é»˜è®¤ i32
let v: Vec&lt;u8&gt; = vec![1, 2, 3, 4];</code></pre>
<p>æƒ³è¦å¾€ Vector ç±»å‹é‡Œé¢æ·»åŠ å…ƒç´ , å¯ä»¥ä½¿ç”¨ <code>push()</code></p>
<pre><code class="language-rust">// ä¼šè‡ªåŠ¨æ¨æ–­ä¸º Vec&lt;i32&gt;
let v = Vec::new();
v.push(1);</code></pre>
<p>è€Œè¦è¯»å– Vector å…ƒç´ , å¯ä»¥ä½¿ç”¨ <code>get()</code> æˆ–è€… ç´¢å¼• ä¸¤ç§æ–¹æ³•</p>
<pre><code class="language-rust">let v: Vec&lt;u8&gt; = vec![1, 2, 3];
if let Some(e) = v.get(2) {
    println!("{}", e);
}
println!("{}", v[2]);</code></pre>
<p><code>get()</code> æ–¹æ³•å°†è¿”å› <code>Option</code> ç±»å‹, æ•…éœ€è¦ <code>unwrap()</code> æˆ–è€…å…¶ä»–æ–¹å¼æ¥è·å–å†…éƒ¨å€¼</p>
<h4 id="æ‰€æœ‰æƒå’Œå€Ÿç”¨è§„åˆ™"><a class="header" href="#æ‰€æœ‰æƒå’Œå€Ÿç”¨è§„åˆ™">æ‰€æœ‰æƒå’Œå€Ÿç”¨è§„åˆ™</a></h4>
<p>è¿™ç‚¹ Vector å’Œå…¶ä»– Rust å…ƒç´ æ˜¯ä¸€æ ·çš„, ä¸å¯ä»¥åœ¨åŒä¸€ä½œç”¨åŸŸå†…åŒæ—¶æœ‰å¯å˜å’Œä¸å¯å˜å¼•ç”¨</p>
<h4 id="éå†å…ƒç´ "><a class="header" href="#éå†å…ƒç´ ">éå†å…ƒç´ </a></h4>
<p>æœ€å¸¸ç”¨çš„å°±æ˜¯ <code>for</code> å¾ªç¯</p>
<pre><code class="language-rust">let v: Vec&lt;u8&gt; = vec![1, 2, 3];
for i in v {
    println!("{}", i);
}</code></pre>
<p>è¿˜å¯ä»¥åœ¨å¾ªç¯å†…æ”¹å˜å€¼</p>
<pre><code class="language-rust">let mut v: Vec&lt;u8&gt; = vec![1, 2, 3];
for i in &amp;mut v {
    *i += 10;
}

for i in v {
    println!("{}", i);
}</code></pre>
<h4 id="example"><a class="header" href="#example">Example</a></h4>
<p>ç”±äº Vector åªèƒ½å­˜æ”¾ç›¸åŒç±»å‹å…ƒç´ , ä½†æœ‰æ—¶å€™éœ€è¦å­˜æ”¾ä¸åŒç±»å‹å…ƒç´ </p>
<p>è¿™æ—¶å€™, æˆ‘ä»¬å°±å¯è®² <code>enum</code> å’Œ <code>Vector</code> ç»“åˆä½¿ç”¨</p>
<pre><code class="language-rust">enum SpreadsheetCell {
    Int(i32),
    Float(f64),
    Text(String),
}

fn main() {
    let row = vec![
        SpreadsheetCell::Int(3),
        SpreadsheetCell::Text(String::from("blue")),
        SpreadsheetCell::Float(10.12),
    ];
}</code></pre>
<h3 id="string"><a class="header" href="#string">String</a></h3>
<p>åœ¨ Rust é‡Œ, String ä½¿ç”¨ <em>UTF-8</em>, æ˜¯ <code>byte</code> çš„é›†åˆ</p>
<p>æ‰€ä»¥å¯ä»¥å°† <code>byte</code> è§£æä¸ºæ–‡æœ¬</p>
<p>ä½†æ˜¯åœ¨æ ¸å¿ƒ, Rust åªæœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹, å³ <code>&amp;str</code></p>
<p>åˆ›å»º <code>String</code> ç±»å‹çš„æ—¶å€™, å¯ä»¥ä½¿ç”¨ <code>String::new()</code> å‡½æ•°, ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>to_string</code> æ–¹æ³•</p>
<p>å®ç°äº† <code>Display</code> trait çš„ç±»å‹éƒ½å¯ä»¥æœ‰è¿™ä¸ªæ–¹æ³•</p>
<p>å¯¹äºå­—ç¬¦ä¸²å­—é¢å€¼è¿˜å¯ä»¥ä½¿ç”¨ <code>String::from()</code> æ–¹æ³•</p>
<pre><code class="language-rust">// ä¸ºäº†ä¹‹åå¯ä»¥å­˜æ”¾ä¸œè¥¿ mut
let mut s1 = String::new();
// æ·»åŠ  string ä½¿ç”¨ `push_str()`, æ·»åŠ å­—ç¬¦ä½¿ç”¨ `push()`
s1.push_str("OK");
let s2 = (1.23).to_string();
let s3 = String::from("hello");

println!("s1: {}, s2: {}, s3: {}", s1, s2, s3);
// =&gt; s1: OK, s2: 1.23, s3: hello</code></pre>
<h4 id="å­—ç¬¦ä¸²æ‹¼æ¥"><a class="header" href="#å­—ç¬¦ä¸²æ‹¼æ¥">å­—ç¬¦ä¸²æ‹¼æ¥</a></h4>
<p>å­—ç¬¦ä¸²æ‹¼æ¥å¯ä»¥ä½¿ç”¨ <code>+</code> å’Œ <code>format!()</code> ä¸¤ç§æ–¹æ³•</p>
<p><code>+</code> è¿ç®—ç¬¦ä¼šéšå¼è°ƒç”¨ <code>add(self, rhs: T) -&gt; Output</code> æ–¹æ³•, ä¼šè·å–ç¬¬ä¸€ä¸ªç®—å­çš„æ‰€æœ‰æƒ</p>
<pre><code class="language-rust">let s1 = "hello".to_string();
let s2 = s1 + " world";
println!("s2: {}", s2);
// println!("s1: {}", s1); // error</code></pre>
<p>è€Œ <code>format!()</code> å¹¶ä¸ä¼š</p>
<pre><code class="language-rust">let s1 = "hello".to_string();
let s2 = format!("{} world", s1);
println!("s2: {}", s2);
println!("s1: {}", s1); // Ok</code></pre>
<h4 id="å­—ç¬¦ä¸²è¡¨ç¤º"><a class="header" href="#å­—ç¬¦ä¸²è¡¨ç¤º">å­—ç¬¦ä¸²è¡¨ç¤º</a></h4>
<p>å­—ç¬¦ä¸²å› ä¸ºä½¿ç”¨äº† <em>UTF-8</em>, æ‰€ä»¥å¹¶ä¸æ”¯æŒç´¢å¼•æ–¹å¼æ¥è·å–å€¼</p>
<p>è€Œä¸” <code>len()</code> æ–¹æ³•è¿”å›çš„æ˜¯å­—èŠ‚æ•°, å¯¹äºä¸€äº›ç‰¹æ®Šå­—ç¬¦ (æ±‰å­—ç­‰), è¿”å›å€¼å¹¶ä¸ç­‰äºå­—ç¬¦æ•°</p>
<p>Rust ä¼šæœ‰ <em>å­—èŠ‚</em>, <em>æ ‡é‡å€¼</em> å’Œ <em>å­—å‹ç°‡</em> ä¸‰ç§æ–¹å¼æ¥</p>
<p>å¯¹åº” <code>bytes()</code> å’Œ <code>chars()</code> æ–¹æ³•, å­—å½¢ç°‡æ ‡å‡†åº“æ²¡æœ‰æä¾›å¯¹åº”æ–¹æ³•è·å–</p>
<p>åˆ‡å‰²å­—ç¬¦ä¸²æ˜¯å…è®¸çš„, ä½†æ˜¯éœ€è¦æ²¿ç€å­—ç¬¦è¾¹ç•Œæ¥åˆ‡å‰²</p>
<blockquote>
<p>å³ ä¸å…è®¸åŠä¸ªå­—ç¬¦</p>
</blockquote>
<pre><code class="language-rust">let s = &amp;"hello".to_string()[0..2];
println!("{}", s);
// =&gt; he</code></pre>
<h3 id="hashmapk-v"><a class="header" href="#hashmapk-v"><code>HashMap&lt;K, V&gt;</code></a></h3>
<p>ç”¨é”®å€¼å¯¹æ¥å­˜å‚¨, å¯ä»¥ç”¨ <code>K</code> æ¥å¯»æ‰¾æ•°æ®</p>
<pre><code class="language-rust">use std::collections::HashMap;

fn main() {
    let mut m: HashMap&lt;String, u16&gt; = HashMap::new();
    m.insert("John".to_string(), 73);
    m.insert("Kevin".to_string(), 82);
    println!("{:#?}", m);
}
/*
{
    "Kevin": 82,
    "John": 73,
}
*/</code></pre>
<p>å¯ä»¥ä½¿ç”¨ <code>insert()</code> æ¥æ’å…¥æ•°æ®, è€Œä¸” HashMap å­˜æ”¾åœ¨ heap ä¸Š</p>
<h4 id="åˆ›å»º"><a class="header" href="#åˆ›å»º">åˆ›å»º</a></h4>
<p>åˆ›å»º HashMap è¿˜å¯ä»¥ä½¿ç”¨ <code>collect()</code> æ–¹æ³•</p>
<pre><code class="language-rust">let name = vec!["Kevin".to_string(), "John".to_string()];
let score = vec![82, 73];
// m ä¸º HashMap&lt;&amp;String, &amp;i32&gt; ç±»å‹
let m = name.iter().zip(score.iter()).collect::&lt;HashMap&lt;_, _&gt;&gt;();</code></pre>
<p><code>insert()</code> é»˜è®¤æ˜¯ Move, å¦‚æœå®ç°äº† Copy trait åˆ™æ˜¯å¤åˆ¶å€¼</p>
<p>è€Œè·å–å€¼åˆ™æ˜¯ <code>get(key)</code> æ–¹æ³•</p>
<h4 id="éå†"><a class="header" href="#éå†">éå†</a></h4>
<p>è€Œéå†, æˆ‘ä»¬åŒæ ·è¿˜å¯ä»¥ä½¿ç”¨ <code>for</code> å¾ªç¯</p>
<pre><code class="language-rust">let mut m: HashMap&lt;String, u16&gt; = HashMap::new();
m.insert("John".to_string(), 73);
m.insert("Kevin".to_string(), 82);

// k : String, v: u16
for (k, v) in m {
    println!("{}: {}", k, v);
}</code></pre>
<h4 id="æ›´æ–°"><a class="header" href="#æ›´æ–°">æ›´æ–°</a></h4>
<p>è¦æ›´æ–°ä¸€ä¸ªç°æœ‰é”®å¯¹åº”çš„å€¼, å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>insert()</code> æ–¹æ³•</p>
<pre><code class="language-rust">let mut m: HashMap&lt;String, u16&gt; = HashMap::new();
m.insert("John".to_string(), 73);
m.insert("Kevin".to_string(), 82);

m.insert("John".to_string(), 90); // update John value</code></pre>
<p>å¦‚æœè¦é˜²æ­¢æ›´æ–°å·²æœ‰é”®çš„å€¼, å¯ä»¥ä½¿ç”¨ <code>entry()</code> é…åˆ <code>or_insert()</code> æ–¹æ³•</p>
<pre><code class="language-rust">m.entry("Peter".to_string()).or_insert(90);</code></pre>
<p>ä¾‹å­, ç»Ÿè®¡è¯æ•°</p>
<pre><code class="language-rust">for word in text.split_whitespace() {
    // å¦‚æœä¸å­˜åœ¨, åˆ™æ’å…¥è¿™ä¸ªé”®, é»˜è®¤å€¼ä¸º 0
    let cnt = map.entry(word).or_insert(0); // è¿”å›å€¼çš„å¯å˜å¼•ç”¨
    // æ¬¡æ•°åŠ ä¸€
    *cnt += 1;
}</code></pre>
<h4 id="hash-å‡½æ•°"><a class="header" href="#hash-å‡½æ•°">Hash å‡½æ•°</a></h4>
<p>é»˜è®¤æƒ…å†µ HashMap ä½¿ç”¨äº† Hash å‡½æ•°æ¥åŠ å¯†, å¯ä»¥æŠµå¾¡ä¸€å®šçš„ DoS æ”»å‡»</p>
<p>ä½†æ˜¯é»˜è®¤å‡½æ•°ä¸æ˜¯æœ€å¿«çš„, ä½†æ˜¯å®‰å…¨æ€§æ›´å¥½</p>
<p>å¯ä»¥ä½¿ç”¨æŒ‡å®šä¸åŒçš„ hasher æ¥åˆ‡æ¢å‡½æ•°</p>
<blockquote>
<p>hasher æŒ‡å®ç°äº† <code>BuildHasher</code> trait çš„ç±»å‹</p>
</blockquote>
<hr />
<p>å¥½! ä»Šå¤©å°±å­¦åˆ°è¿™ç½¢</p>
</main>
                        <nav class="nav-wrapper" aria-label="Page navigation">
                            <a rel="prev" href="../../notes/rust/20220520-rust-learn-07.html"
                                class="mobile-nav-chapters previous"
                                title="Previous chapter"
                                aria-label="Previous chapter"
                                aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next prefetch"
                                href="../../notes/rust/20220523-rust-learn-09.html"
                                class="mobile-nav-chapters next"
                                title="Next chapter" aria-label="Next chapter"
                                aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                            <div style="clear: both"></div>
                        </nav>
                    </div>
                </div>
                <div class="giscus-comment">
                </div>
                <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../notes/rust/20220520-rust-learn-07.html"
                        class="nav-chapters previous" title="Previous chapter"
                        aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next prefetch" href="../../notes/rust/20220523-rust-learn-09.html"
                        class="nav-chapters next" title="Next chapter"
                        aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                </nav>
            </div>
            <script>
                window.playground_copyable = true;
            </script>
            <script src="../../elasticlunr.min.js"></script>
            <script src="../../mark.min.js"></script>
            <script src="../../searcher.js"></script>
            <script src="../../clipboard.min.js"></script>
            <script src="../../highlight.js"></script>
            <script src="../../book.js"></script>
            <script src="../../theme/giscus.js"></script>
        </div>
    </body>
</html>
