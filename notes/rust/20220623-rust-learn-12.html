<!DOCTYPE HTML>
<html
    lang="zh-Hans" 
    class="rust" 
    dir="ltr"> 
    <head>
        <title>Rust å­¦ä¹  12 - Kevin Stephen&#x27;s Blogs</title> 
        <meta charset="UTF-8">
        <meta name="description" content="æ‰¾åˆ°å±äºè‡ªå·±çš„å…‰">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">
        
         
        <link rel="icon" href="../../favicon.svg">
         
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">

        <link rel="stylesheet"
            href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <link rel="stylesheet" href="../../theme/utils.css">

    </head>
    <body class="sidebar-visible no-js">
        <div id="body-container">
            <script>
                // è·å– root è·¯å¾„
                var path_to_root = "../../";
                // è·å–é»˜è®¤ä¸»é¢˜
                var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches
                    ? "ayu"
                    : "rust";
            </script>
            <script>
                try {
                    var theme = localStorage.getItem("mdbook-theme");
                    var sidebar = localStorage.getItem("mdbook-sidebar");

                    if (theme.startsWith('"') && theme.endsWith('"')) {
                        localStorage.setItem(
                            "mdbook-theme",
                            theme.slice(1, theme.length - 1).trim()
                        );
                    }

                    if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                        localStorage.setItem(
                            "mdbook-sidebar",
                            sidebar.slice(1, sidebar.length - 1).trim()
                        );
                    }
                } catch (e) {}
            </script>
            <script>
                var theme;
                try {
                    theme = localStorage.getItem("mdbook-theme");
                } catch (e) {}
                if (theme === null || theme === undefined) {
                    theme = default_theme;
                }
                var html = document.querySelector("html");
                html.classList.remove("rust");
                html.classList.add(theme);
                var body = document.querySelector("body");
                body.classList.remove("no-js");
                body.classList.add("js");
            </script>

            <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">
            <script>
                var body = document.querySelector("body");
                var sidebar = null;
                var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
                if (document.body.clientWidth >= 1080) {
                try {
                    sidebar = localStorage.getItem("mdbook-sidebar");
                } catch (e) {}
                    sidebar = sidebar || "visible";
                } else {
                    sidebar = "hidden";
                }
                sidebar_toggle.checked = sidebar === "visible";
                body.classList.remove("sidebar-visible");
                body.classList.add("sidebar-" + sidebar);
            </script>

            <nav id="sidebar" class="sidebar" aria-label="Table of contents">
                <div class="sidebar-scrollbox">
                    <ol class="chapter"><li class="chapter-item "><a href="../../init.html">Init</a></li><li class="chapter-item "><a href="../../about.html">About</a></li><li class="chapter-item affix "><li class="part-title">Notes</li><li class="chapter-item expanded "><a href="../../notes/rust/index.html">Rust</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../notes/rust/20210605-rust-learn-01.html">Rust å­¦ä¹  01</a></li><li class="chapter-item "><a href="../../notes/rust/20210610-rust-learn-02.html">Rust å­¦ä¹  02</a></li><li class="chapter-item "><a href="../../notes/rust/20210824-rust-learn-03.html">Rust å­¦ä¹  03</a></li><li class="chapter-item "><a href="../../notes/rust/20211216-rust-learn-04.html">Rust å­¦ä¹  04</a></li><li class="chapter-item "><a href="../../notes/rust/20220512-rust-learn-05.html">Rust å­¦ä¹  05</a></li><li class="chapter-item "><a href="../../notes/rust/20220514-rust-learn-06.html">Rust å­¦ä¹  06</a></li><li class="chapter-item "><a href="../../notes/rust/20220520-rust-learn-07.html">Rust å­¦ä¹  07</a></li><li class="chapter-item "><a href="../../notes/rust/20220522-rust-learn-08.html">Rust å­¦ä¹  08</a></li><li class="chapter-item "><a href="../../notes/rust/20220523-rust-learn-09.html">Rust å­¦ä¹  09</a></li><li class="chapter-item "><a href="../../notes/rust/20220611-rust-learn-10.html">Rust å­¦ä¹  10</a></li><li class="chapter-item "><a href="../../notes/rust/20220619-rust-learn-11.html">Rust å­¦ä¹  11</a></li><li class="chapter-item "><a href="../../notes/rust/20220619-rust-learn-project-01.html">Rust å­¦ä¹  å®ä¾‹ 01</a></li><li class="chapter-item expanded "><a href="../../notes/rust/20220623-rust-learn-12.html" class="active">Rust å­¦ä¹  12</a></li><li class="chapter-item "><a href="../../notes/rust/20220624-rust-learn-13.html">Rust å­¦ä¹  13</a></li><li class="chapter-item "><a href="../../notes/rust/20220925-rust-learn-14.html">Rust å­¦ä¹  14</a></li><li class="chapter-item "><a href="../../notes/rust/20220925-rust-learn-15.html">Rust å­¦ä¹  15</a></li><li class="chapter-item "><a href="../../notes/rust/20221030-rust-learn-final.html">Rust å­¦ä¹  final</a></li><li class="chapter-item "><a href="../../notes/rust/20221030-rust-learn-project-02.html">Rust å­¦ä¹  å®ä¾‹ 02</a></li></ol></li><li class="chapter-item "><a href="../../notes/postgresql/index.html">PostgreSQL</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../notes/postgresql/20230502-psql-learn-01.html">PostgreSQL å­¦ä¹  01</a></li><li class="chapter-item "><a href="../../notes/postgresql/20231024-psql-learn-02.html">PostgreSQL å­¦ä¹  02</a></li><li class="chapter-item "><a href="../../notes/postgresql/20231110-psql-learn-03.html">PostgreSQL å­¦ä¹  03</a></li></ol></li><li class="chapter-item "><a href="../../notes/typechallenges/index.html">Type Challenges</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../notes/typechallenges/20230425-type-challenges-01.html">TypeScript ç±»å‹ä½“æ“ 01</a></li><li class="chapter-item "><a href="../../notes/typechallenges/20230428-type-challenges-02.html">TypeScript ç±»å‹ä½“æ“ 02</a></li></ol></li><li class="chapter-item "><li class="part-title">Miscellany</li><li class="chapter-item "><a href="../../miscellany/coding/index.html">Coding</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../miscellany/coding/20210604-scope-of-if-statement.html">if è¯­å¥çš„ä½œç”¨åŸŸ</a></li><li class="chapter-item "><a href="../../miscellany/coding/20221026-parse-math-in-c.html">C è¯­è¨€æ•°å­¦è§£æå™¨</a></li><li class="chapter-item "><a href="../../miscellany/coding/20231107-clash-system-agent.html">Cğœ†ash ç³»ç»Ÿä»£ç†</a></li><li class="chapter-item "><a href="../../miscellany/coding/20240228-use-giscus-in-mdbook.html">åœ¨ mdBook ä¸­ä½¿ç”¨ giscus æœåŠ¡</a></li></ol></li><li class="chapter-item "><a href="../../miscellany/study/index.html">Study</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../miscellany/study/20221108-qiskit-linear-algebra.html">qiskit çº¿æ€§ä»£æ•°</a></li><li class="chapter-item "><a href="../../miscellany/study/20221111-qiskit-Deutsch-Jozsa-algorithm.html">qiskit Deutsch-Jozsa ç®—æ³•</a></li></ol></li><li class="chapter-item "><a href="../../miscellany/life/index.html">Life</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../miscellany/life/20230411-about-life.html">è¯´è¯´ä»¥åçš„æ‰“ç®—ç½¢</a></li><li class="chapter-item "><a href="../../miscellany/life/20230715-about-job.html">è°ˆè°ˆæœ€è¿‘çš„å·¥ä½œçŠ¶æ€</a></li><li class="chapter-item "><a href="../../miscellany/life/20230915-end-of-summer.html">æš‘å‡ç»“æŸäº†</a></li><li class="chapter-item "><a href="../../miscellany/life/20231020-new-life.html">æ–°çš„ç”Ÿæ´»</a></li><li class="chapter-item "><a href="../../miscellany/life/20240120-busy-life.html">å¿™å¿™ç¢Œç¢Œ</a></li></ol></li></ol>
                </div>
                <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                    <div class="sidebar-resize-indicator"></div>
                </div>
            </nav>

            <script>
                var sidebarScrollbox = document.querySelector("#sidebar .sidebar-scrollbox");
                sidebarScrollbox.addEventListener(
                    "click",
                    function (e) {
                        if (e.target.tagName === "A") {
                            sessionStorage.setItem("sidebar-scroll", sidebarScrollbox.scrollTop);
                        }
                    },
                    { passive: true }
                );
                var sidebarScrollTop = sessionStorage.getItem("sidebar-scroll");
                sessionStorage.removeItem("sidebar-scroll");
                if (sidebarScrollTop) {
                    // preserve sidebar scroll position when navigating via links within sidebar
                    sidebarScrollbox.scrollTop = sidebarScrollTop;
                } else {
                    // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                    var activeSection = document.querySelector("#sidebar .active");
                    if (activeSection) {
                        activeSection.scrollIntoView({ block: "center" });
                    }
                }
            </script>

            <div id="page-wrapper" class="page-wrapper">
                <div class="page">
                                        <div id="menu-bar-hover-placeholder"></div>
                    <div id="menu-bar" class="menu-bar sticky">
                        <div class="left-buttons">
                            <label id="sidebar-toggle" class="icon-button"
                                for="sidebar-toggle-anchor"
                                title="Toggle Table of Contents"
                                aria-label="Toggle Table of Contents"
                                aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </label>
                            <button id="theme-toggle" class="icon-button"
                                type="button" title="Change theme"
                                aria-label="Change theme" aria-haspopup="true"
                                aria-expanded="false"
                                aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup"
                                aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem"
                                        class="theme"
                                        id="light">Light</button></li>
                                <li role="none"><button role="menuitem"
                                        class="theme"
                                        id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem"
                                        class="theme"
                                        id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem"
                                        class="theme"
                                        id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem"
                                        class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            <button id="search-toggle" class="icon-button"
                                type="button" title="Search. (Shortkey: s)"
                                aria-label="Toggle Searchbar"
                                aria-expanded="false" aria-keyshortcuts="S"
                                aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                        </div>
                        <h1 class="menu-title">Kevin Stephen&#x27;s Blogs</h1>
                        <div class="right-buttons">
                            <a href="https://github.com/kands-code/kands-code.github.io"
                                title="Git repository"
                                aria-label="Git repository">
                                <i id="git-repository-button"
                                    class="fa fa-github"></i>
                            </a>
                            <a href="https://github.com/kands-code/kands-code.github.io/edit/repo-src/src/src/notes/rust/20220623-rust-learn-12.md"
                                title="Suggest an edit"
                                aria-label="Suggest an edit">
                                <i id="git-edit-button" class="fa fa-edit"></i>
                            </a>
                        </div>
                    </div>
                    <div id="search-wrapper" class="hidden">
                        <form id="searchbar-outer" class="searchbar-outer">
                            <input type="search" id="searchbar" name="searchbar"
                                placeholder="searching..."
                                aria-controls="searchresults-outer"
                                aria-describedby="searchresults-header">
                        </form>
                        <div id="searchresults-outer"
                            class="searchresults-outer hidden">
                            <div id="searchresults-header"
                                class="searchresults-header"></div>
                            <ul id="searchresults">
                            </ul>
                        </div>
                    </div>
                    <script>
                        document
                            .getElementById("sidebar-toggle")
                            .setAttribute("aria-expanded", sidebar === "visible");
                        document
                            .getElementById("sidebar")
                            .setAttribute("aria-hidden", sidebar !== "visible");
                        Array.from(document.querySelectorAll("#sidebar a")).forEach(function (link) {
                            link.setAttribute("tabIndex", sidebar === "visible" ? 0 : -1);
                        });
                    </script>

                    <div id="content" class="content">
                        <main><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<h1 id="rust-å­¦ä¹ -12"><a class="header" href="#rust-å­¦ä¹ -12">Rust å­¦ä¹  12</a></h1>
<p class="archive-time">archive time: 2022-06-23</p>
<p class="sp-comment">è¿™å›æ¥çœ‹çœ‹ cargo æ‰“åŒ…</p>
<ul>
<li><a href="#release-profile">release profile</a></li>
<li><a href="#%E5%8F%91%E5%B8%83-crate">å‘å¸ƒ Crate</a>
<ul>
<li><a href="#%E6%96%87%E6%A1%A3%E6%B3%A8%E9%87%8A">æ–‡æ¡£æ³¨é‡Š</a>
<ul>
<li><a href="#%E6%96%87%E6%A1%A3%E6%B5%8B%E8%AF%95">æ–‡æ¡£æµ‹è¯•</a></li>
<li><a href="#%E6%B3%A8%E9%87%8A%E6%96%87%E6%A1%A3">æ³¨é‡Šæ–‡æ¡£</a></li>
</ul>
</li>
<li><a href="#pub-use">pub use</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA-cratesio-%E8%B4%A6%E5%8F%B7">åˆ›å»º crates.io è´¦å·</a></li>
<li><a href="#%E5%8F%91%E5%B8%83%E4%B9%8B%E5%90%8E">å‘å¸ƒä¹‹å</a></li>
</ul>
</li>
<li><a href="#cargo-%E5%B7%A5%E4%BD%9C%E7%A9%BA%E9%97%B4">Cargo å·¥ä½œç©ºé—´</a></li>
<li><a href="#%E5%AE%89%E8%A3%85%E4%BA%8C%E8%BF%9B%E5%88%B6-crate">å®‰è£…äºŒè¿›åˆ¶ crate</a>
<ul>
<li><a href="#%E6%89%A9%E5%B1%95-cargo">æ‰©å±• cargo</a></li>
</ul>
</li>
</ul>
<p>Rust æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ä¼˜åŠ¿å°±æ˜¯å®ƒæœ‰ä¸€ä¸ªå®Œæ•´çš„å®Œå–„çš„å·¥å…·é“¾, cargo</p>
<p>é€šè¿‡ cargo, æˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾çš„å®Œæˆç¼–è¯‘, æµ‹è¯•, æ‰“åŒ…è¿™å‡ ä¸ªæ­¥éª¤</p>
<p>ä¸è¿‡å…³äº cargo æ‰“åŒ…, æœ‰ä¸€äº›å†…å®¹è¿˜æ˜¯éœ€è¦ä¸»è¦</p>
<h2 id="release-profile"><a class="header" href="#release-profile">release profile</a></h2>
<p>profile æ˜¯é¢„å…ˆå®šä¹‰å¥½çš„ç›¸å…³çš„é…ç½®, å¯¹åº”çš„æœ‰ release å’Œ dev ä¸¤ç§</p>
<p>æ¯ä¸ª profile éƒ½æ˜¯å¯ä»¥è‡ªè¡Œé…åˆ¶çš„, å°±æ˜¯åœ¨ <code>Cargo.toml</code> é‡Œè®¾ç½®</p>
<pre><code class="language-toml"># Cargo.toml
# ...
[profile.dev]
opt-level = 0

[profile.release]
opt-level = 3
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è¦†ç›–é»˜è®¤çš„ profile é‡Œçš„ <code>opt-level</code> è®¾ç½®äº†</p>
<p>è‡³äºæœ‰å“ªäº›é€‰é¡¹, å¯ä»¥å‚è€ƒæ–‡æ¡£<sup class="footnote-reference"><a href="#1">1</a></sup></p>
<h2 id="å‘å¸ƒ-crate"><a class="header" href="#å‘å¸ƒ-crate">å‘å¸ƒ Crate</a></h2>
<p>æˆ‘ä»¬é™¤äº†å¯ä»¥ä¸‹è½½ crate, æˆ‘ä»¬è¿˜å¯ä»¥ä¸Šä¼ æˆ‘ä»¬çš„ crate</p>
<h3 id="æ–‡æ¡£æ³¨é‡Š"><a class="header" href="#æ–‡æ¡£æ³¨é‡Š">æ–‡æ¡£æ³¨é‡Š</a></h3>
<p>åœ¨ crate é‡Œ, æ–‡æ¡£æ˜¯å¾ˆé‡è¦çš„, åœ¨ Rust é‡Œ, ä¸“é—¨æœ‰ç§æ³¨é‡Šæ¥ç”Ÿäº§æ–‡æ¡£, é‚£å°±æ˜¯ <em>æ–‡æ¡£æ³¨é‡Š</em></p>
<p>æ–‡æ¡£æ³¨é‡Š ç”¨äºç”Ÿæˆ HTML æ–‡æ¡£, æ˜¾å¼å…¬å…± API çš„æ³¨é‡Šè¿˜å¯ä»¥è¯´æ˜å¦‚ä½•ä½¿ç”¨ API</p>
<p>ç”šè‡³åœ¨ Rust è¿˜å¯ä»¥è¿›è¡Œæ–‡æ¡£æµ‹è¯•, å³åœ¨æ–‡æ¡£é‡Œæµ‹è¯•ä»£ç , ä»¥ä¿è¯æ–‡æ¡£å’Œä»£ç åŒæ­¥ä»¥åŠä»£ç æˆ–æ–‡æ¡£çš„æ­£ç¡®æ€§</p>
<p>æ–‡æ¡£æ³¨é‡Šä½¿ç”¨ <code>///</code> æ¥å®ç°, æ”¯æŒä¸€å®šçš„ <strong>Markdown</strong> è¯­æ³•</p>
<pre><code class="language-rust">/// Adds one to the number given.
///
/// # Examples
///
/// ```
/// let arg = 5;
/// let answer = learn_rust::add_one(arg);
///
/// assert_eq!(6, answer);
/// ```
pub fn add_one(x: i32) -&gt; i32 {
    x + 1
}</code></pre>
<p>æ•ˆæœå¦‚ä¸‹å›¾</p>
<p><img src="../../assert/img/rust-learn-12-pic01.png" alt="doc comment" /></p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>cargo doc</code> æ¥ç”Ÿæˆæ–‡æ¡£</p>
<p>æ³¨æ„åˆ°åœ¨é¡¹ç›®ç›®å½•ä¸‹çš„ <code>target/</code> ç›®å½•ä¸‹æœ‰äº†ä¸€ä¸ª <code>doc/</code> ç›®å½•, é‡Œé¢å°±æ˜¯ç”Ÿæˆçš„æ–‡æ¡£</p>
<pre><code class="language-text">(base) PS projRoot&gt; dir .\target\doc\


    ç›®å½•: projRoot\target\doc


Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
d-----         2022/6/23     14:14                cfg_if
d-----         2022/6/23     14:14                either
d-----         2022/6/23     14:14                getrandom
d-----         2022/6/23     14:14                implementors
d-----         2022/6/23     14:14                itertools
d-----         2022/6/23     14:14                learn_rust
d-----         2022/6/23     14:14                ppv_lite86
d-----         2022/6/23     14:14                rand
d-----         2022/6/23     14:14                rand_chacha
d-----         2022/6/23     14:14                rand_core
d-----         2022/6/23     14:14                src
-a----         2022/6/23     14:14              0 .lock
-a----         2022/6/23     14:14          12235 ayu.css
-a----         2022/6/23     14:14            576 clipboard.svg
-a----         2022/6/23     14:14           1791 COPYRIGHT.txt
-a----         2022/6/23     14:14            123 crates.js
-a----         2022/6/23     14:14          10683 dark.css
-a----         2022/6/23     14:14            510 down-arrow.svg
-a----         2022/6/23     14:14            715 favicon-16x16.png
-a----         2022/6/23     14:14           1125 favicon-32x32.png
-a----         2022/6/23     14:14           4298 favicon.svg
-a----         2022/6/23     14:14           4419 FiraSans-LICENSE.txt
-a----         2022/6/23     14:14         132780 FiraSans-Medium.woff2
-a----         2022/6/23     14:14         129188 FiraSans-Regular.woff2
-a----         2022/6/23     14:14          10847 LICENSE-APACHE.txt
-a----         2022/6/23     14:14           1023 LICENSE-MIT.txt
-a----         2022/6/23     14:14          10287 light.css
-a----         2022/6/23     14:14          19656 main.js
-a----         2022/6/23     14:14           4745 NanumBarunGothic-LICENSE.txt
-a----         2022/6/23     14:14         399468 NanumBarunGothic.ttf.woff2
-a----         2022/6/23     14:14           1853 normalize.css
-a----         2022/6/23     14:14             97 noscript.css
-a----         2022/6/23     14:14           3297 rust-logo.svg
-a----         2022/6/23     14:14          28317 rustdoc.css
-a----         2022/6/23     14:14         164833 search-index.js
-a----         2022/6/23     14:14          34753 search.js
-a----         2022/6/23     14:14           1425 settings.css
-a----         2022/6/23     14:14           3792 settings.html
-a----         2022/6/23     14:14           6064 settings.js
-a----         2022/6/23     14:14           2019 source-files.js
-a----         2022/6/23     14:14           4403 source-script.js
-a----         2022/6/23     14:14          44896 SourceCodePro-It.ttf.woff2
-a----         2022/6/23     14:14           4528 SourceCodePro-LICENSE.txt
-a----         2022/6/23     14:14          52228 SourceCodePro-Regular.ttf.woff2
-a----         2022/6/23     14:14          52348 SourceCodePro-Semibold.ttf.woff2
-a----         2022/6/23     14:14          81320 SourceSerif4-Bold.ttf.woff2
-a----         2022/6/23     14:14          59860 SourceSerif4-It.ttf.woff2
-a----         2022/6/23     14:14           4485 SourceSerif4-LICENSE.md
-a----         2022/6/23     14:14          76180 SourceSerif4-Regular.ttf.woff2
-a----         2022/6/23     14:14           3556 storage.js
-a----         2022/6/23     14:14            174 toggle-minus.svg
-a----         2022/6/23     14:14            191 toggle-plus.svg
-a----         2022/6/23     14:14           3764 wheel.svg
</code></pre>
<p>åœ¨ <code>&lt;projRoot&gt;/target/doc/&lt;projName&gt;/index.html</code> å°±æ˜¯æ–‡æ¡£çš„ä¸»é¡µé¢äº†</p>
<p>æ‰“å¼€åå¯ä»¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„é¡µé¢, ä¸€ä¸ªå¾ˆæ ‡å‡†çš„ Rust æ–‡æ¡£ç•Œé¢</p>
<p><img src="../../assert/img/rust-learn-12-pic02.png" alt="standard doc pages" /></p>
<p>å½“ç„¶, é™¤äº†æ‰‹åŠ¨æ‰“å¼€, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>cargo doc --open</code> æ¥æ‰“å¼€é¡µé¢, æ•ˆæœæ˜¯ä¸€æ ·çš„</p>
<p>åœ¨æ–‡æ¡£æ³¨é‡Šé‡Œé¢ä¸€èˆ¬æœ‰å‡ ä¸ªå›ºå®šçš„åŒºåŸŸ</p>
<ul>
<li>Examples: ç¤ºä¾‹, è¯´æ˜å‡½æ•°æˆ–ä»£ç çš„ç”¨æ³•</li>
<li>Panics: å¯èƒ½å‘ç”Ÿ panic çš„åœºæ™¯</li>
<li>Errors: è¿”å› Result æˆ– Option æ—¶çš„é”™è¯¯ç±»å‹æˆ–è€…äº§ç”Ÿé”™è¯¯çš„æ¡ä»¶</li>
<li>Safty: å¦‚æœå‡½æ•°æ˜¯ <em>unsafe</em> çš„, è¯´æ˜åŸå› , ä»¥åŠä½¿ç”¨å‰æ</li>
</ul>
<h4 id="æ–‡æ¡£æµ‹è¯•"><a class="header" href="#æ–‡æ¡£æµ‹è¯•">æ–‡æ¡£æµ‹è¯•</a></h4>
<p>æˆ‘ä»¬åœ¨æ–‡æ¡£é‡Œå†™çš„ä¾‹å­å¯ä»¥è¿›è¡Œæ–‡æ¡£æµ‹è¯•, ä½¿ç”¨ <code>cargo test --doc</code> å³å¯</p>
<pre><code class="language-text">(base) PS projRoot&gt; cargo test --doc
    Finished test [optimized + debuginfo] target(s) in 0.03s
   Doc-tests learn_rust

running 1 test
test src\lib.rs - add_one (line 122) ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.21s
</code></pre>
<h4 id="æ³¨é‡Šæ–‡æ¡£"><a class="header" href="#æ³¨é‡Šæ–‡æ¡£">æ³¨é‡Šæ–‡æ¡£</a></h4>
<p>é™¤äº†ä¸ºæ–‡æ¡£ä¸‹çš„ä»£ç è¿›è¡Œæ³¨é‡Š, æˆ‘ä»¬è¿˜å¯ä»¥å¯¹æ•´ä¸ªæ–‡ä»¶æˆ–è€… crate æˆ–è€… æ¨¡å— è¿›è¡Œæ³¨é‡Š, ä½¿ç”¨ç¬¦å· <code>//!</code></p>
<pre><code class="language-rust">// src/lib.rs

//! # Learn Rust
//!
//! `learn_rust` æ˜¯æˆ‘å­¦ä¹  Rust æ—¶çš„ä¸€ä¸ªæµ‹è¯•é¡¹ç›®, æ–¹ä¾¿è¿›è¡Œæµ‹è¯•

// ....</code></pre>
<p>åœ¨ <code>src/lib.rs</code> é‡Œæ·»åŠ äº†è¿™ä¹ˆä¸€äº›æ³¨é‡Šå, æˆ‘ä»¬å†æ‰“å¼€æ–‡æ¡£, å‘ç°æ–‡æ¡£å†…å®¹ä¹Ÿå‘ç”Ÿäº†å˜åŒ–</p>
<p><img src="../../assert/img/rust-learn-12-pic03.png" alt="after doc" /></p>
<h3 id="pub-use"><a class="header" href="#pub-use">pub use</a></h3>
<p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸ºæ–¹ä¾¿è°ƒç”¨æ¥å¯¼å‡ºä¸€äº›å…¬å…± API, è¿™æ ·å°±å¯ä»¥ä½¿ç”¨ <code>pub use</code> å…³é”®å­—</p>
<p><code>pub use</code> ä½œç”¨æ˜¯ <em>é‡æ–°å¯¼å‡º</em>, åˆ›å»ºäº†ä¸€ä¸ªä¸å†…éƒ¨ç§æœ‰ç»“æ„ä¸åŒçš„å¯¹å¤–å…¬å…±ç»“æ„</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰è¿™ä¹ˆä¸€ä¸ªæ–‡ä»¶ <code>src/lib.rs</code></p>
<pre><code class="language-rust">//! # Learn Rust
//!
//! `learn_rust` æ˜¯æˆ‘å­¦ä¹  Rust æ—¶çš„ä¸€ä¸ªæµ‹è¯•é¡¹ç›®, æ–¹ä¾¿è¿›è¡Œæµ‹è¯•

pub mod kinds {
    /// The primary colors according to the RYB color model
    pub enum PrimaryColor {
        Red,
        Yellow,
        Blue,
    }

    /// The secondary colors according to the RYB color model
    pub enum SecondaryColor {
        Orange,
        Green,
        Purple,
    }
}

pub mod utils {
    use crate::kinds::*;

    /// Combines two primary colors in equal amounts to create
    /// a secondary color
    pub fn mix(color1: PrimaryColor, color2: PrimaryColor) -&gt; SecondaryColor {
        SecondaryColor::Green
    }
}</code></pre>
<p>åœ¨æ–‡æ¡£é‡Œè¡¨ç°å‡ºæ¥æ˜¯è¿™æ ·çš„</p>
<p><img src="../../assert/img/rust-learn-12-pic04.png" alt="test doc" /></p>
<p>ä¸æ˜¯å¾ˆç›´è§‚, ä¹Ÿä¸æ¸…æ¥šæ¯ä¸ªæ¨¡å—é‡Œçš„çš„ä¸œè¥¿</p>
<p>å¦‚æœæˆ‘ä»¬åœ¨æ–‡ä»¶é‡ŒåŠ ä¸Šè¿™å‡ è¡Œ</p>
<pre><code class="language-rust">// src/lib.rs

pub use self::kinds::PrimaryColor;
pub use self::kinds::SecondaryColor;
pub use self::utils::mix;

// ...</code></pre>
<p>å†çœ‹ä¸€çœ¼æ–‡æ¡£, ä¼šå‡ºç°ä¸€ä¸ª <code>Re-exports</code> æ ç›®, é‡Œé¢æ‘†ä¸Šäº†æˆ‘ä»¬é‡æ–°å¯¼å‡ºçš„å†…å®¹, å°±å¾ˆç›´è§‚äº†</p>
<p><img src="../../assert/img/rust-learn-12-pic05.png" alt="after pub use" /></p>
<p>åœ¨ä½¿ç”¨æ—¶, æˆ‘ä»¬ä¹Ÿåªéœ€è¦ <code>&lt;projName&gt;::&lt;itemName&gt;</code> å³å¯, <code>itemName</code> æ˜¯ä½ å¯¼å‡ºçš„å†…å®¹çš„åå­—</p>
<h3 id="åˆ›å»º-cratesio-è´¦å·"><a class="header" href="#åˆ›å»º-cratesio-è´¦å·">åˆ›å»º crates.io è´¦å·</a></h3>
<p>å‰é¢éƒ¨åˆ†æˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•å†™æ–‡æ¡£æ³¨é‡Šå’Œç”Ÿæˆæ–‡æ¡£, ç°åœ¨æ¥æ­£å¼çœ‹çœ‹å¦‚ä½•å‘å¸ƒ</p>
<p>å†å‘å¸ƒä¹‹å‰æˆ‘ä»¬è¿˜éœ€è¦æœ‰ä¸€ä¸ª <a href="https://crates.io/">crates.io</a> çš„è´¦å·, è¿™æ˜¯è‡ªç„¶çš„</p>
<p>æ³¨æ„çœ‹ crates.io çš„ä¸»ç•Œé¢ (2022 å¹´ 06 æœˆ 23 æ—¥), æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¹ˆä¸€ä¸ªé€‰é¡¹</p>
<p><img src="../../assert/img/rust-learn-12-pic06.png" alt="crates.io" /></p>
<p>æ³¨å†Œå¥½è´¦å·å, æˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ª crates.io çš„ API Token</p>
<p>ç‚¹å‡» <strong>Account Settings</strong>, æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°ä¸€ä¸ª <em>API Tokens</em> çš„åœ°æ–¹</p>
<p><img src="../../assert/img/rust-learn-12-pic07.png" alt="some steps" /></p>
<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥ç”Ÿæˆä¸€ä¸ªæ–°çš„ token ä¾›æˆ‘ä»¬ä½¿ç”¨äº†</p>
<p><img src="../../assert/img/rust-learn-12-pic08.png" alt="generate token" /></p>
<p>æœ‰äº† token, æˆ‘ä»¬å°±å¯ä»¥åœ¨ cargo ä½¿ç”¨ <code>cargo login</code> æ¥è¿›è¡Œç™»å½•æ“ä½œ</p>
<pre><code class="language-text">(base) PS projRoot&gt; cargo login &lt;API Token&gt;
       Login token for `crates.io` saved
</code></pre>
<p>API Token ä¼šè¢«å­˜æ”¾åœ¨ <code>&lt;cargo-home&gt;/credentials</code> é‡Œé¢</p>
<p>ä¸è¿‡åœ¨å‘å¸ƒå‰è¿˜æ˜¯éœ€è¦åœ¨æˆ‘ä»¬çš„ crate é‡Œçš„ <code>[package]</code> æ·»åŠ å¯¹åº”å…ƒæ•°æ®</p>
<ul>
<li>name: crate çš„å”¯ä¸€æ ‡è¯†</li>
<li>description: å¯¹ crate çš„ç®€å•æè¿°</li>
<li>license: è®¸å¯è¯çš„æ ‡è¯†å€¼<sup class="footnote-reference"><a href="#2">2</a></sup>, å¤šä¸ªè®¸å¯ä½¿ç”¨ <code>OR</code> éš”å¼€</li>
<li>version: ç‰ˆæœ¬</li>
<li>authors: ä½œè€…, ä¸€ä¸ªåˆ—è¡¨, å¯ä»¥æ”¾å¤šä¸ªåå­—</li>
</ul>
<p>ä¾‹å¦‚å¯¹äº <code>learn_rust</code> æˆ‘ä»¬å¯ä»¥è¿™æ ·</p>
<pre><code class="language-toml">[package]
name = "learn_rust"
version = "0.1.0"
edition = "2021"
license = "MIT"
authors = ["kands-code"]
</code></pre>
<p>ç¡®ä¿ä¸€åˆ‡å‡†å¤‡å¦¥å½“, æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ <code>cargo publish</code> æ¥å‘å¸ƒ crate äº†</p>
<h3 id="å‘å¸ƒä¹‹å"><a class="header" href="#å‘å¸ƒä¹‹å">å‘å¸ƒä¹‹å</a></h3>
<p>å‘å¸ƒ crate ä¹‹å, æˆ‘ä»¬æ˜¯ <strong><em>ä¸èƒ½å¤Ÿ</em></strong> åˆ é™¤ crate çš„, ä¸è¿‡æˆ‘ä»¬å¯ä»¥ <strong>æ’¤å›(yank)</strong> ä¸€ä¸ª crate ç‰ˆæœ¬</p>
<p>yank å¯ä»¥é˜²æ­¢æ–°é¡¹ç›®ä¾èµ–äºè¯¥ç‰ˆæœ¬, ä½†æ˜¯æ— æ³•é˜»æ­¢ç»§ç»­ä½¿ç”¨å…¶ä½œä¸ºä¾èµ–</p>
<p>yank äº†å°±æ„å‘³ç€</p>
<ul>
<li>æ‰€æœ‰äº§ç”Ÿ <code>Cargo.lock</code> çš„é¡¹ç›®éƒ½ä¸ä¼šä¸­æ–­</li>
<li>ä»»ä½•å°†æ¥ç”Ÿæˆçš„ <code>Cargo.lock</code> æ–‡ä»¶éƒ½ä¸ä¼šä½¿ç”¨è¢« yank çš„ç‰ˆæœ¬</li>
</ul>
<pre><code class="language-text">cargo yank --vers &lt;version&gt;
</code></pre>
<p>æˆ‘ä»¬è¿˜å¯ä»¥å–æ¶ˆ yank</p>
<pre><code class="language-text">cargo yank --vers &lt;version&gt; --undo
</code></pre>
<h2 id="cargo-å·¥ä½œç©ºé—´"><a class="header" href="#cargo-å·¥ä½œç©ºé—´">Cargo å·¥ä½œç©ºé—´</a></h2>
<p>æœ‰äº›æ—¶å€™, ä¸ºäº†æ¨¡å—åŒ–é¡¹ç›®, æˆ‘ä»¬éœ€è¦å°†é¡¹ç›®æ‹†æˆå¤šä¸ª crate</p>
<p>è€Œå·¥ä½œç©ºé—´å°±æ˜¯ä¸€å¥—å…±äº« <code>Cargo.lock</code> å’Œ è¾“å‡ºæ–‡ä»¶å¤¹ çš„åŒ…</p>
<p>å¯¹äºä½œä¸ºå·¥ä½œç©ºé—´çš„ç›®å½•, æˆ‘ä»¬éœ€è¦å‡†å¤‡ä¸€ä¸ª <code>Cargo.toml</code> æ–‡ä»¶, é‡Œé¢è®¾ç½®å·¥ä½œç©ºé—´</p>
<pre><code class="language-toml">[workspace]
members = ["adder", "add-one"]
</code></pre>
<p>ç„¶ååœ¨ç›®å½•ä¸‹ä½¿ç”¨ <code>cargo new adder</code> å’Œ <code>cargo new add-one --lib</code> æ¥åˆ›å»ºè¿™ä¸¤ä¸ªæˆå‘˜</p>
<p>æˆ‘ä»¬ä½¿ç”¨ <code>cargo build</code> å‘ç°, åœ¨ <code>adder/</code> å’Œ <code>add-one/</code> ç›®å½•ä¸‹éƒ½æ²¡æœ‰ <code>target/</code> ç›®å½•, è€Œæ˜¯åœ¨å·¥ä½œç©ºé—´ç›®å½•æœ‰ä¸€ä¸ªç»Ÿä¸€çš„ <code>target/</code></p>
<pre><code class="language-text">(base) PS ws&gt; dir .

    Directory: ws

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
d----           2022/6/23    16:17                add-one
d----           2022/6/23    16:15                adder
d----           2022/6/23    16:14                target
-a---           2022/6/23    16:14              8 .gitignore
-a---           2022/6/23    16:18            197 Cargo.lock
-a---           2022/6/23    16:18             45 Cargo.toml
</code></pre>
<p>å¦‚æœéœ€è¦è¯´æ˜è¿™ä¸¤ä¸ª crate ç›¸äº’ä¾èµ–, éœ€è¦åœ¨å¯¹åº”çš„ crate é‡Œè¯´æ˜</p>
<pre><code class="language-toml"># adder/Cargo.toml
[package]
name = "adder"
version = "0.1.0"
edition = "2021"

[dependencies]
add-one = { path = "../add-one" }
</code></pre>
<p>æˆ‘ä»¬å¦‚æœè¦æ‰§è¡Œå·¥ä½œç©ºé—´ä¸­æŸä¸€ç‰¹å®š crate, åˆ™éœ€è¦ <code>cargo run -p &lt;crate-name&gt;</code></p>
<pre><code class="language-rust">(base) PS ws&gt; cargo run -p adder
    Finished dev [unoptimized + debuginfo] target(s) in 0.01s
     Running `target\debug\adder.exe`
31</code></pre>
<p>å·¥ä½œç©ºé—´çš„ä¸€ä¸ªå¾ˆé‡è¦çš„æ„ä¹‰å°±æ˜¯åŒæ­¥ç‰ˆæœ¬, å› ä¸ºä¸€ä¸ªå·¥ä½œç©ºé—´å†…çš„ crate éƒ½å…±ç”¨ä¸€ä¸ª <code>Cargo.lock</code>, ä¿è¯äº†ä½¿ç”¨çš„åº“çš„ç‰ˆæœ¬ç»Ÿä¸€</p>
<p>è¿™æ ·ä¸€æ¥, ä¸€ä¸ªå·¥ä½œç©ºé—´å†…çš„ crate éƒ½æ˜¯ç›¸äº’å…¼å®¹çš„</p>
<h2 id="å®‰è£…äºŒè¿›åˆ¶-crate"><a class="header" href="#å®‰è£…äºŒè¿›åˆ¶-crate">å®‰è£…äºŒè¿›åˆ¶ crate</a></h2>
<p>æˆ‘ä»¬å¯ä»¥ä» crates.io ä¸­å®‰è£…äºŒè¿›åˆ¶ crate, ä½¿ç”¨ <code>cargo install &lt;crate-name&gt;</code> å³å¯</p>
<p>è¿™ä¸ªå°±æ— éœ€æ¼”ç¤ºäº†</p>
<h3 id="æ‰©å±•-cargo"><a class="header" href="#æ‰©å±•-cargo">æ‰©å±• cargo</a></h3>
<p>å¦‚æœäºŒè¿›åˆ¶åç§°ä¸º <code>cargo-xxx</code>, åˆ™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>cargo xxx</code> æ¥æ‰§è¡Œè¿™ä¸ªäºŒè¿›åˆ¶åå­—, <del>çœ‹èµ·æ¥å°±æ˜¯æ‰©å±•äº† cargo çš„åŠŸèƒ½</del></p>
<hr />
<p>å¥½, cargo å°±ç®—å­¦å¾—å·®ä¸å¤šäº†, å¼€æ‘¸!</p>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p>ç›¸å…³æ–‡æ¡£ <a href="https://doc.rust-lang.org/stable/cargo/reference/manifest.html">Cargo.toml</a>,
<a href="https://doc.rust-lang.org/stable/cargo/reference/profiles.html">Profiles</a></p>
</div>
<div class="footnote-definition" id="2"><sup class="footnote-definition-label">2</sup>
<p>å¯ä»¥åœ¨ <a href="https://spdx.org/licenses/">è¿™é‡Œ</a> æŸ¥æ‰¾, å¯¹åº” <strong>identifier</strong> ä¸€æ </p>
</div>
</main>
                        <nav class="nav-wrapper" aria-label="Page navigation">
                            <a rel="prev" href="../../notes/rust/20220619-rust-learn-project-01.html"
                                class="mobile-nav-chapters previous"
                                title="Previous chapter"
                                aria-label="Previous chapter"
                                aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next prefetch"
                                href="../../notes/rust/20220624-rust-learn-13.html"
                                class="mobile-nav-chapters next"
                                title="Next chapter" aria-label="Next chapter"
                                aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                            <div style="clear: both"></div>
                        </nav>
                    </div>
                </div>
                <div class="giscus-comment">
                </div>
                <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../notes/rust/20220619-rust-learn-project-01.html"
                        class="nav-chapters previous" title="Previous chapter"
                        aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next prefetch" href="../../notes/rust/20220624-rust-learn-13.html"
                        class="nav-chapters next" title="Next chapter"
                        aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                </nav>
            </div>
            <script>
                window.playground_copyable = true;
            </script>
            <script src="../../elasticlunr.min.js"></script>
            <script src="../../mark.min.js"></script>
            <script src="../../searcher.js"></script>
            <script src="../../clipboard.min.js"></script>
            <script src="../../highlight.js"></script>
            <script src="../../book.js"></script>
            <script src="../../theme/giscus.js"></script>
        </div>
    </body>
</html>
