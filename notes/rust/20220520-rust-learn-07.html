<!DOCTYPE HTML>
<html
    lang="zh-Hans" 
    class="rust" 
    dir="ltr"> 
    <head>
        <title>Rust å­¦ä¹  07 - Kevin Stephen&#x27;s Blogs</title> 
        <meta charset="UTF-8">
        <meta name="description" content="æ‰¾åˆ°å±äºè‡ªå·±çš„å…‰">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">
        
         
        <link rel="icon" href="../../favicon.svg">
         
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">

        <link rel="stylesheet"
            href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <link rel="stylesheet" href="../../theme/utils.css">

    </head>
    <body class="sidebar-visible no-js">
        <div id="body-container">
            <script>
                // è·å– root è·¯å¾„
                var path_to_root = "../../";
                // è·å–é»˜è®¤ä¸»é¢˜
                var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches
                    ? "ayu"
                    : "rust";
            </script>
            <script>
                try {
                    var theme = localStorage.getItem("mdbook-theme");
                    var sidebar = localStorage.getItem("mdbook-sidebar");

                    if (theme.startsWith('"') && theme.endsWith('"')) {
                        localStorage.setItem(
                            "mdbook-theme",
                            theme.slice(1, theme.length - 1).trim()
                        );
                    }

                    if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                        localStorage.setItem(
                            "mdbook-sidebar",
                            sidebar.slice(1, sidebar.length - 1).trim()
                        );
                    }
                } catch (e) {}
            </script>
            <script>
                var theme;
                try {
                    theme = localStorage.getItem("mdbook-theme");
                } catch (e) {}
                if (theme === null || theme === undefined) {
                    theme = default_theme;
                }
                var html = document.querySelector("html");
                html.classList.remove("rust");
                html.classList.add(theme);
                var body = document.querySelector("body");
                body.classList.remove("no-js");
                body.classList.add("js");
            </script>

            <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">
            <script>
                var body = document.querySelector("body");
                var sidebar = null;
                var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
                if (document.body.clientWidth >= 1080) {
                try {
                    sidebar = localStorage.getItem("mdbook-sidebar");
                } catch (e) {}
                    sidebar = sidebar || "visible";
                } else {
                    sidebar = "hidden";
                }
                sidebar_toggle.checked = sidebar === "visible";
                body.classList.remove("sidebar-visible");
                body.classList.add("sidebar-" + sidebar);
            </script>

            <nav id="sidebar" class="sidebar" aria-label="Table of contents">
                <div class="sidebar-scrollbox">
                    <ol class="chapter"><li class="chapter-item "><a href="../../init.html">Init</a></li><li class="chapter-item "><a href="../../about.html">About</a></li><li class="chapter-item affix "><li class="part-title">Notes</li><li class="chapter-item expanded "><a href="../../notes/rust/index.html">Rust</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../notes/rust/20210605-rust-learn-01.html">Rust å­¦ä¹  01</a></li><li class="chapter-item "><a href="../../notes/rust/20210610-rust-learn-02.html">Rust å­¦ä¹  02</a></li><li class="chapter-item "><a href="../../notes/rust/20210824-rust-learn-03.html">Rust å­¦ä¹  03</a></li><li class="chapter-item "><a href="../../notes/rust/20211216-rust-learn-04.html">Rust å­¦ä¹  04</a></li><li class="chapter-item "><a href="../../notes/rust/20220512-rust-learn-05.html">Rust å­¦ä¹  05</a></li><li class="chapter-item "><a href="../../notes/rust/20220514-rust-learn-06.html">Rust å­¦ä¹  06</a></li><li class="chapter-item expanded "><a href="../../notes/rust/20220520-rust-learn-07.html" class="active">Rust å­¦ä¹  07</a></li><li class="chapter-item "><a href="../../notes/rust/20220522-rust-learn-08.html">Rust å­¦ä¹  08</a></li><li class="chapter-item "><a href="../../notes/rust/20220523-rust-learn-09.html">Rust å­¦ä¹  09</a></li><li class="chapter-item "><a href="../../notes/rust/20220611-rust-learn-10.html">Rust å­¦ä¹  10</a></li><li class="chapter-item "><a href="../../notes/rust/20220619-rust-learn-11.html">Rust å­¦ä¹  11</a></li><li class="chapter-item "><a href="../../notes/rust/20220619-rust-learn-project-01.html">Rust å­¦ä¹  å®ä¾‹ 01</a></li><li class="chapter-item "><a href="../../notes/rust/20220623-rust-learn-12.html">Rust å­¦ä¹  12</a></li><li class="chapter-item "><a href="../../notes/rust/20220624-rust-learn-13.html">Rust å­¦ä¹  13</a></li><li class="chapter-item "><a href="../../notes/rust/20220925-rust-learn-14.html">Rust å­¦ä¹  14</a></li><li class="chapter-item "><a href="../../notes/rust/20220925-rust-learn-15.html">Rust å­¦ä¹  15</a></li><li class="chapter-item "><a href="../../notes/rust/20221030-rust-learn-final.html">Rust å­¦ä¹  final</a></li><li class="chapter-item "><a href="../../notes/rust/20221030-rust-learn-project-02.html">Rust å­¦ä¹  å®ä¾‹ 02</a></li></ol></li><li class="chapter-item "><a href="../../notes/postgresql/index.html">PostgreSQL</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../notes/postgresql/20230502-psql-learn-01.html">PostgreSQL å­¦ä¹  01</a></li><li class="chapter-item "><a href="../../notes/postgresql/20231024-psql-learn-02.html">PostgreSQL å­¦ä¹  02</a></li><li class="chapter-item "><a href="../../notes/postgresql/20231110-psql-learn-03.html">PostgreSQL å­¦ä¹  03</a></li></ol></li><li class="chapter-item "><a href="../../notes/typechallenges/index.html">Type Challenges</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../notes/typechallenges/20230425-type-challenges-01.html">TypeScript ç±»å‹ä½“æ“ 01</a></li><li class="chapter-item "><a href="../../notes/typechallenges/20230428-type-challenges-02.html">TypeScript ç±»å‹ä½“æ“ 02</a></li></ol></li><li class="chapter-item "><li class="part-title">Miscellany</li><li class="chapter-item "><a href="../../miscellany/coding/index.html">Coding</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../miscellany/coding/20210604-scope-of-if-statement.html">if è¯­å¥çš„ä½œç”¨åŸŸ</a></li><li class="chapter-item "><a href="../../miscellany/coding/20221026-parse-math-in-c.html">C è¯­è¨€æ•°å­¦è§£æå™¨</a></li><li class="chapter-item "><a href="../../miscellany/coding/20231107-clash-system-agent.html">Cğœ†ash ç³»ç»Ÿä»£ç†</a></li><li class="chapter-item "><a href="../../miscellany/coding/20240228-use-giscus-in-mdbook.html">åœ¨ mdBook ä¸­ä½¿ç”¨ giscus æœåŠ¡</a></li></ol></li><li class="chapter-item "><a href="../../miscellany/study/index.html">Study</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../miscellany/study/20221108-qiskit-linear-algebra.html">qiskit çº¿æ€§ä»£æ•°</a></li><li class="chapter-item "><a href="../../miscellany/study/20221111-qiskit-Deutsch-Jozsa-algorithm.html">qiskit Deutsch-Jozsa ç®—æ³•</a></li></ol></li><li class="chapter-item "><a href="../../miscellany/life/index.html">Life</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../miscellany/life/20230411-about-life.html">è¯´è¯´ä»¥åçš„æ‰“ç®—ç½¢</a></li><li class="chapter-item "><a href="../../miscellany/life/20230715-about-job.html">è°ˆè°ˆæœ€è¿‘çš„å·¥ä½œçŠ¶æ€</a></li><li class="chapter-item "><a href="../../miscellany/life/20230915-end-of-summer.html">æš‘å‡ç»“æŸäº†</a></li><li class="chapter-item "><a href="../../miscellany/life/20231020-new-life.html">æ–°çš„ç”Ÿæ´»</a></li><li class="chapter-item "><a href="../../miscellany/life/20240120-busy-life.html">å¿™å¿™ç¢Œç¢Œ</a></li></ol></li></ol>
                </div>
                <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                    <div class="sidebar-resize-indicator"></div>
                </div>
            </nav>

            <script>
                var sidebarScrollbox = document.querySelector("#sidebar .sidebar-scrollbox");
                sidebarScrollbox.addEventListener(
                    "click",
                    function (e) {
                        if (e.target.tagName === "A") {
                            sessionStorage.setItem("sidebar-scroll", sidebarScrollbox.scrollTop);
                        }
                    },
                    { passive: true }
                );
                var sidebarScrollTop = sessionStorage.getItem("sidebar-scroll");
                sessionStorage.removeItem("sidebar-scroll");
                if (sidebarScrollTop) {
                    // preserve sidebar scroll position when navigating via links within sidebar
                    sidebarScrollbox.scrollTop = sidebarScrollTop;
                } else {
                    // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                    var activeSection = document.querySelector("#sidebar .active");
                    if (activeSection) {
                        activeSection.scrollIntoView({ block: "center" });
                    }
                }
            </script>

            <div id="page-wrapper" class="page-wrapper">
                <div class="page">
                                        <div id="menu-bar-hover-placeholder"></div>
                    <div id="menu-bar" class="menu-bar sticky">
                        <div class="left-buttons">
                            <label id="sidebar-toggle" class="icon-button"
                                for="sidebar-toggle-anchor"
                                title="Toggle Table of Contents"
                                aria-label="Toggle Table of Contents"
                                aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </label>
                            <button id="theme-toggle" class="icon-button"
                                type="button" title="Change theme"
                                aria-label="Change theme" aria-haspopup="true"
                                aria-expanded="false"
                                aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup"
                                aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem"
                                        class="theme"
                                        id="light">Light</button></li>
                                <li role="none"><button role="menuitem"
                                        class="theme"
                                        id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem"
                                        class="theme"
                                        id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem"
                                        class="theme"
                                        id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem"
                                        class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            <button id="search-toggle" class="icon-button"
                                type="button" title="Search. (Shortkey: s)"
                                aria-label="Toggle Searchbar"
                                aria-expanded="false" aria-keyshortcuts="S"
                                aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                        </div>
                        <h1 class="menu-title">Kevin Stephen&#x27;s Blogs</h1>
                        <div class="right-buttons">
                            <a href="https://github.com/kands-code/kands-code.github.io"
                                title="Git repository"
                                aria-label="Git repository">
                                <i id="git-repository-button"
                                    class="fa fa-github"></i>
                            </a>
                            <a href="https://github.com/kands-code/kands-code.github.io/edit/repo-src/src/src/notes/rust/20220520-rust-learn-07.md"
                                title="Suggest an edit"
                                aria-label="Suggest an edit">
                                <i id="git-edit-button" class="fa fa-edit"></i>
                            </a>
                        </div>
                    </div>
                    <div id="search-wrapper" class="hidden">
                        <form id="searchbar-outer" class="searchbar-outer">
                            <input type="search" id="searchbar" name="searchbar"
                                placeholder="searching..."
                                aria-controls="searchresults-outer"
                                aria-describedby="searchresults-header">
                        </form>
                        <div id="searchresults-outer"
                            class="searchresults-outer hidden">
                            <div id="searchresults-header"
                                class="searchresults-header"></div>
                            <ul id="searchresults">
                            </ul>
                        </div>
                    </div>
                    <script>
                        document
                            .getElementById("sidebar-toggle")
                            .setAttribute("aria-expanded", sidebar === "visible");
                        document
                            .getElementById("sidebar")
                            .setAttribute("aria-hidden", sidebar !== "visible");
                        Array.from(document.querySelectorAll("#sidebar a")).forEach(function (link) {
                            link.setAttribute("tabIndex", sidebar === "visible" ? 0 : -1);
                        });
                    </script>

                    <div id="content" class="content">
                        <main><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<h1 id="rust-å­¦ä¹ -07"><a class="header" href="#rust-å­¦ä¹ -07">Rust å­¦ä¹  07</a></h1>
<p class="archive-time">archive time: 2022-05-20</p>
<p class="sp-comment">åŠªåŠ›å­¦ä¹  Rust</p>
<h2 id="struct-æ–¹æ³•"><a class="header" href="#struct-æ–¹æ³•">Struct æ–¹æ³•</a></h2>
<p>struct æ–¹æ³•ç±»ä¼¼äº Java é‡Œçš„ç±»ä¸­çš„æˆå‘˜æ–¹æ³•å’Œç±»æ–¹æ³•</p>
<p>ä¹Ÿå°±æ˜¯</p>
<ul>
<li><em>æ–¹æ³•</em> æ˜¯åœ¨ struct (enum, trait) çš„ <strong>ä¸Šä¸‹æ–‡</strong> ä¸­å®šä¹‰çš„</li>
<li>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>self</code> (ç±»ä¼¼ Python), è¡¨ç¤ºè°ƒç”¨çš„å®ä¾‹</li>
</ul>
<p>å¯¹åº”æ¦‚å¿µå«åš <em>å…³è”å‡½æ•°</em>, ä¸å®ä¾‹æ— å…³, å³ä¸éœ€è¦ä½¿ç”¨ <code>self</code></p>
<pre><code class="language-rust">#[derive(Debug)]
struct Rectangle {
    width: u16,
    length: u16,
}
// è¡¨ç¤ºå®ç°ç»“æ„ä½“ç›¸å…³å†…å®¹
impl Rectangle {
    // å…³è”å‡½æ•°
    pub fn new(width: u16, length: u16) -&gt; Self {
        Rectangle { width, length }
    }
    // ç»“æ„ä½“æ–¹æ³•
    pub fn area(&amp;self) -&gt; u16 {
        self.length * self.width
    }
}

fn main() {
    // ä½¿ç”¨å…³è”å‡½æ•°
    let rec = Rectangle::new(10, 16);
    // ä½¿ç”¨ç»“æ„ä½“æ–¹æ³•
    println!("{}", rec.area());
}</code></pre>
<h2 id="æšä¸¾-enum"><a class="header" href="#æšä¸¾-enum">æšä¸¾ (enum)</a></h2>
<p>Rust é‡Œçš„æšä¸¾æ¯” C æˆ– Java çš„æšä¸¾è¦é«˜çº§å¾ˆå¤š, è€Œä¸”è¿˜å¯ä»¥ä½¿ç”¨æ¨¡å¼åŒ¹é…, æ˜¯ä¸€ä¸ªå¾ˆå¥½ç”¨çš„å·¥å…·</p>
<p>ä¾‹å¦‚:</p>
<pre><code class="language-rust">fn main() {
    let ipv4 = IPAddress::IPv4(192, 168, 1, 1);
    let ipv6 = IPAddress::IPv6("2001:DB8:2de::e13".to_string());
    route(ipv4);
    route(ipv6);
}

#[derive(Debug)]
enum IPAddress {
    IPv4(u8, u8, u8, u8),
    IPv6(String),
}
// ä½¿ç”¨æšä¸¾ç±»å‹çš„å‡½æ•°
fn route(ip_addr: IPAddress) {
    println!("{:?}", ip_addr);
}</code></pre>
<p>è¿™é‡Œ, <code>IPv4</code> å’Œ <code>IPv6</code> éƒ½æ˜¯ <code>IPAdress</code> çš„ <em>æšä¸¾å˜ä½“</em></p>
<p>è€Œ <code>IPv4</code> åé¢æ‰€å¸¦çš„å°±æ˜¯æ¯ä¸ªå˜ä½“æ‰€é™„å¸¦çš„æ•°æ®</p>
<h3 id="æšä¸¾æ–¹æ³•"><a class="header" href="#æšä¸¾æ–¹æ³•">æšä¸¾æ–¹æ³•</a></h3>
<p>ç±»ä¼¼ç»“æ„ä½“, æšä¸¾ä¹Ÿå¯ä»¥å®šä¹‰æ–¹æ³•, å³ä½¿ç”¨ <code>impl</code> å…³é”®å­—</p>
<pre><code class="language-rust">fn main() {
    let ipv4 = IPAddress::IPv4(192, 168, 1, 1);
    let ipv6 = IPAddress::IPv6("2001:DB8:2de::e13".to_string());
    ipv4.route();
    ipv6.route();
}

#[derive(Debug)]
enum IPAddress {
    IPv4(u8, u8, u8, u8),
    IPv6(String),
}

impl IPAddress {
    fn route(&amp;self) {
        println!("{:?}", self);
    }
}</code></pre>
<h3 id="option-æšä¸¾"><a class="header" href="#option-æšä¸¾">Option æšä¸¾</a></h3>
<p>Option å’Œ Haskell çš„ Maybe ç±»å‹, æœ‰ Some (Just) å’Œ None (Nothing) ä¸¤ä¸ªå˜ä½“</p>
<p>ä¾‹å­å¦‚ä¸‹</p>
<pre><code class="language-rust">fn main() {
    let some_num: Option&lt;u8&gt; = Some(10);
    let nothing: Option&lt;u8&gt; = None;
    println!("{}, {}", get_val(some_num), get_val(nothing));
}

fn get_val(opt: Option&lt;u8&gt;) -&gt; i8 {
    match opt {
        Some(n) =&gt; match n.try_into() {
            Ok(v) =&gt; v,
            Err(_) =&gt; -1,
        },
        None =&gt; -1,
    }
}</code></pre>
<p>ä¸‹é¢çš„ match å°±ä½¿ç”¨äº† <em>æ¨¡å¼åŒ¹é…</em></p>
<p>å¯¹äº Option ç±»å‹, æˆ‘ä»¬è¿˜å¯ä»¥è¿™æ ·</p>
<pre><code class="language-rust">if let Some(n) = some_num {
    println!("{}", n + 10);
}</code></pre>
<h3 id="match"><a class="header" href="#match">match</a></h3>
<p>match æ˜¯åˆ†æ”¯è¯­å¥, æ¯ä¸ª arm (åˆ†æ”¯) å¯¹åº”ç€ä¸€ä¸ª <em>æ¨¡å¼</em>, ä¾‹å¦‚</p>
<pre><code class="language-rust">match opt {
    Some(n) =&gt; match n.try_into() {
        Ok(v) =&gt; v,
        Err(_) =&gt; -1,
    },
    None =&gt; -1,
}</code></pre>
<p>é‡Œçš„ <code>Some(n)</code> å’Œ <code>None</code> å°±æ˜¯ä¸¤ä¸ªæ¨¡å¼, æ¨¡å¼å¯ä»¥åŒ…å«å­—é¢å€¼, å˜é‡å ä»¥åŠ é€šé…ç¬¦(<code>_</code>) ç­‰</p>
<p>è¿™é‡Œçš„ <code>n</code> å°±æ˜¯å˜é‡å, å¦‚æœ opt æ˜¯ <code>Some(_)</code> è¿™ç§å½¢å¼çš„, é‚£ä¹ˆå°±æŠŠ <code>Some</code> é‡Œçš„å€¼èµ‹ç»™ <code>n</code> æ¥ä½¿ç”¨</p>
<p>è€Œ <code>None</code> å°±æ˜¯å­—é¢å€¼</p>
<p>ä½†æ˜¯ match å¿…é¡»è¦è¦†ç›–æ‰€æœ‰å¯èƒ½, å³åŒ¹é… Option æ—¶, éœ€è¦å¤„ç† Some å’Œ None ä¸¤ç§å½¢å¼</p>
<p>Rust çš„ match è¿˜å¯ä»¥è¿™æ ·</p>
<pre><code class="language-rust">fn main() {
    let x = Some(8u8);
    let res = match x {
        Some(v) if v &lt; 10 =&gt; v + 10,
        Some(v) =&gt; v,
        None =&gt; 0,
    };
    println!("{}", res);
}</code></pre>
<p>å³, ä½¿ç”¨ if è¿›è¡Œç»†åŒ–ç­›é€‰</p>
<h2 id="rust-ä»£ç ç»„ç»‡"><a class="header" href="#rust-ä»£ç ç»„ç»‡">Rust ä»£ç ç»„ç»‡</a></h2>
<p>Rust çš„ä»£ç ç»„ç»‡å¤§æ¦‚å¯åˆ†ä¸º</p>
<ul>
<li>åŒ… (package)</li>
<li>å•å…ƒåŒ… (crate)</li>
<li>æ¨¡å— (module)</li>
</ul>
<h3 id="crate"><a class="header" href="#crate">crate</a></h3>
<p>crate å¯ä»¥åˆ†æˆ <em>library</em> å’Œ <em>binary</em></p>
<ol>
<li>Crate Root
<ul>
<li>æ˜¯æºä»£ç æ–‡ä»¶</li>
<li>ç¼–è¯‘å™¨ä»è¿™é‡Œå¼€å§‹ç»„æˆ crate çš„ root module</li>
</ul>
</li>
<li>Package
<ul>
<li>åªèƒ½åŒ…å« 1 ä¸ª <code>Cargo.toml</code>, æè¿°äº†å¦‚ä½•æ„å»º</li>
<li>åªèƒ½åŒ…å«ä¸€ä¸ªæˆ–é›¶ä¸ª <em>library crate</em></li>
<li>å¯ä»¥æœ‰ä»»æ„å¤šä¸ª <em>binary crate</em></li>
<li>æœ€å°‘è¦æœ‰ä¸€ä¸ª crate</li>
</ul>
</li>
</ol>
<h3 id="module"><a class="header" href="#module">Module</a></h3>
<p>Module å¤šç”¨æ¥æ§åˆ¶ä½œç”¨åŸŸå’Œç§æœ‰æ€§</p>
<p>module ç”¨äºåœ¨ä¸€ä¸ª crate é‡Œå¯¹ä»£ç è¿›è¡Œåˆ†ç»„, å¢åŠ æ˜“è¯»æ€§å’Œå¯å¤ç”¨æ€§</p>
<p>module è¿˜å¯æ§åˆ¶é¡¹ç›® (item) çš„ç§æœ‰æ€§ (pub), é»˜è®¤æ˜¯ç§æœ‰çš„</p>
<p>å»ºç«‹ module å¯ä»¥ä½¿ç”¨ mod å…³é”®å­—, è€Œä¸” mod ä¹‹é—´å¯ä»¥åµŒå¥—</p>
<pre><code class="language-text">- src
  - utils
    - tools.rs
    - mod.rs
  - lib.rs
  - main.rs
</code></pre>
<p>å„ä¸ªæ–‡ä»¶å†…çš„å†…å®¹å¦‚ä¸‹</p>
<pre><code class="language-rust">/// utils/tools.rs
// å¯ä»¥å®šä¹‰ä¸€äº›å‡½æ•°å’Œç»“æ„ä½“
pub fn mul&lt;T&gt;(a: T, b: T) -&gt; T
where
    T: std::ops::Mul&lt;Output = T&gt;,
{
    a * b
}

/// utils/mod.rs
// utils æ¨¡å—çš„æ§åˆ¶æ–‡ä»¶
pub mod tools;

/// lib.rs
// library crate çš„ crate root
mod utils; // å£°æ˜ utils mod
// å®šä¹‰ä¸€äº›å‡½æ•°
pub fn add&lt;T&gt;(a: T, b: T) -&gt; T
where
    T: std::ops::Add&lt;Output = T&gt;,
{
    a + b
}

/// main.rs
// binary crate çš„ crate root
mod utils; // å£°æ˜ utils mod
// ä½¿ç”¨ mod å‡½æ•°
use crate::utils::tools::mul;
// ä½¿ç”¨é¡¹ç›®åè°ƒç”¨ library crate ä¸­çš„å†…å®¹
use learn_rust::add;
// ä¸»å‡½æ•°
fn main() {
    let x = Some(8u8);
    let res = match x {
        Some(v) if v &lt; 10 =&gt; v + 10,
        Some(v) =&gt; v,
        None =&gt; 0,
    };
    println!("{}", res);
    // ä¸€äº›è°ƒç”¨ç¤ºä¾‹
    println!("{}", add(10, 20));
    println!("{}", mul(10, 20));
}</code></pre>
<h3 id="è·¯å¾„"><a class="header" href="#è·¯å¾„">è·¯å¾„</a></h3>
<p>è·¯å¾„å¯ä»¥åˆ†ä¸ºç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„</p>
<p>ç»å¯¹è·¯å¾„ä» <code>crate</code> å¼€å§‹</p>
<p>è€Œç›¸å¯¹è·¯å¾„ä»å½“å‰æ¨¡å—å¼€å§‹æ¥å¼€å§‹æ‰¾</p>
<p>å¯¹äºç›¸å¯¹è·¯å¾„, å¦‚æœè¦è®¿é—®ä¸Šä¸€çº§è·¯å¾„, å¯ä»¥ä½¿ç”¨ <code>super</code> å…³é”®å­—</p>
<p>ä¸€èˆ¬æ¨èç»å¯¹è·¯å¾„</p>
<h4 id="ç§æœ‰æ€§"><a class="header" href="#ç§æœ‰æ€§">ç§æœ‰æ€§</a></h4>
<p>é»˜è®¤çš„æ¨¡å—å’Œé¡¹ç›®éƒ½æ˜¯ç§æœ‰çš„</p>
<p>å¦‚æœæƒ³è¦å¯¹å¤–å¼€æ”¾, é‚£ä¹ˆå¯ä»¥ä½¿ç”¨ <code>pub</code> å…³é”®å­—æ¥å¼€æ”¾</p>
<p>å¯¹äºç»“æ„ä½“å¦‚æœç”¨ <code>pub</code> ä¿®é¥°äº†, é‚£ä¹ˆç»“æ„ä½“ç±»å‹æ˜¯å¼€æ”¾çš„</p>
<p>ä½†æ˜¯é‡Œé¢çš„å­—æ®µå¦‚æœæ²¡æœ‰ <code>pub</code> ä¿®é¥°, é‚£ä¹ˆé»˜è®¤è¿˜æ˜¯ç§æœ‰çš„</p>
<pre><code class="language-rust">// å¯ä»¥ä½¿ç”¨ Matrix ç±»å‹
pub struct Matrix&lt;T&gt;
where
    T: std::ops::Add&lt;Output = T&gt;
        + std::ops::Mul&lt;Output = T&gt;
        + std::ops::Sub&lt;Output = T&gt;
        + Eq
        + PartialEq
        + Ord
        + PartialOrd,
{
    // å¤–éƒ¨æ— æ³•è®¿é—®å­—æ®µ
    data: Vec&lt;T&gt;,
    pub size: (u16, u16), // å…¬å¼€
}</code></pre>
<p>ä½†æ˜¯å¯¹äº <code>enum</code> å¦‚æœå…¬å¼€äº†, é‚£ä¹ˆæ¯ä¸ª variant éƒ½æ˜¯å…¬å¼€çš„</p>
<blockquote>
<p>å¯ä»¥ä½¿ç”¨ <code>pub use</code> æ¥é‡æ–°å¯¼å‡º</p>
</blockquote>
<hr />
<p>å¥½, ä»Šå¤©å°±å­¦åˆ°è¿™ç½¢, æ‘¸!</p>
</main>
                        <nav class="nav-wrapper" aria-label="Page navigation">
                            <a rel="prev" href="../../notes/rust/20220514-rust-learn-06.html"
                                class="mobile-nav-chapters previous"
                                title="Previous chapter"
                                aria-label="Previous chapter"
                                aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next prefetch"
                                href="../../notes/rust/20220522-rust-learn-08.html"
                                class="mobile-nav-chapters next"
                                title="Next chapter" aria-label="Next chapter"
                                aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                            <div style="clear: both"></div>
                        </nav>
                    </div>
                </div>
                <div class="giscus-comment">
                </div>
                <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../notes/rust/20220514-rust-learn-06.html"
                        class="nav-chapters previous" title="Previous chapter"
                        aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next prefetch" href="../../notes/rust/20220522-rust-learn-08.html"
                        class="nav-chapters next" title="Next chapter"
                        aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                </nav>
            </div>
            <script>
                window.playground_copyable = true;
            </script>
            <script src="../../elasticlunr.min.js"></script>
            <script src="../../mark.min.js"></script>
            <script src="../../searcher.js"></script>
            <script src="../../clipboard.min.js"></script>
            <script src="../../highlight.js"></script>
            <script src="../../book.js"></script>
            <script src="../../theme/giscus.js"></script>
        </div>
    </body>
</html>
